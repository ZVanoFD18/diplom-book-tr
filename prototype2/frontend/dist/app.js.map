{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/App/Component/Menu.css","webpack:///./src/css/reset.css","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/app/App.css","webpack:///./src/app/App/Component.css","webpack:///./src/app/App/Component/Nav.css","webpack:///./src/app/App/Component/Setlang.css","webpack:///./src/app/App/Component/Statistic.css","webpack:///./src/app/App/Component/Library.css","webpack:///./src/app/App/Component/Read.css","webpack:///./src/app/App/Component/WinWordActions.css","webpack:///./src/app/App/Component/Study.css","webpack:///./src/app/App/Component/Study/Grid.css","webpack:///./src/app/App/Component/Loadmask.css","webpack:///./src/app/App/Component/WinMsg.css","webpack:///./src/app/App/Component/WinWordCard.css","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./src/app/Helper/Ajax.js","webpack:///./src/app/Helper/Fb2.js","webpack:///./src/app/Helper/Google.js","webpack:///./src/app/Helper/Hash.js","webpack:///./src/app/Helper/Io.js","webpack:///./src/app/Helper/Idb.js","webpack:///./src/app/Helper/Log.js","webpack:///./src/app/Helper/Obj.js","webpack:///./src/app/Helper/Text.js","webpack:///./src/app/Helper/Xml.js","webpack:///./src/app/Helper.js","webpack:///./src/app/App/Component/Nav.js","webpack:///./src/app/App/Component/Setlang.js","webpack:///./src/app/App/Component/Statistic.js","webpack:///./src/app/App/Errors/User.js","webpack:///./src/app/App/Errors/App.js","webpack:///./src/app/App/Component/Menu.js","webpack:///./src/app/App/Idb/Books.js","webpack:///./src/app/App/Idb/KeyVal/LastSession.js","webpack:///./src/app/App/Idb/KeyVal.js","webpack:///./src/app/App/Idb/WordsStudy.js","webpack:///./src/app/App/Idb/WordsTranslate.js","webpack:///./src/app/App/Idb.js","webpack:///./src/app/App/Component/Library/BooksList.js","webpack:///./src/app/App/Component/Library/LoadFromFile.js","webpack:///./src/app/App/Component/Library.js","webpack:///./src/app/App/Component/WinWordActions.js","webpack:///./src/app/App/Component/Read.js","webpack:///./src/app/App/Component/Study/Grid.js","webpack:///./src/app/App/Errors/User/PressCancel.js","webpack:///./src/app/App/Component/Study.js","webpack:///./src/app/App/Component/Loadmask.js","webpack:///./src/app/App/Component/WinMsg.js","webpack:///./src/app/App/Component/WinWordCard.js","webpack:///./src/app/App/Component.js","webpack:///./src/app/App/Errors.js","webpack:///./src/app/App/Localize.js","webpack:///./src/app/App.js","webpack:///./src/entry-app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","content","options","hmr","transform","insertInto","undefined","locals","css","location","window","Error","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","indexOf","JSON","stringify","fn","memo","stylesInDom","isOldIE","document","all","atob","apply","this","arguments","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","length","item","domStyle","id","refs","j","parts","push","addStyle","listToStyles","list","newStyles","base","part","media","sourceMap","insertStyleElement","style","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","join","cssNode","childNodes","Ajax","xhr","XMLHttpRequest","ActiveXObject","Fb2","text","tplBook","lang","image","title","sections","tplBookSection","book","assign","xml","Helper","Xml","getXMLFromString","encoding","xmlEncoding","charset","characterSet","toLowerCase","innerHTML","headerTitle","querySelectorAll","elP","imageEl","substr","getImage","getAttribute","elSection","section","node","nodeType","textContent","Google","googleStruct","wordLang","word","translate","score","data","translateTo","translateFrom","Promise","resolve","reject","url","encodeURI","fetch","then","response","json","_typeof","formData","FormData","append","urlGet","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","iterator","next","done","pair","err","return","open","withCredentials","setRequestHeader","send","upload","onload","alert","addEventListener","readyState","getResponseHeader","Base62","chars","encode","Math","floor","decode","w","q","pow","Hash","str","hash","charCodeAt","abs","toString","_","f","charAt","M","String","fromCharCode","V","h","g","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","Array","Y","X","md5_cmn","bit_rol","Io","elFile","files","reader","FileReader","onerror","readAsText","Idb","dbName","req","db","indexedDB","webkitGetDatabaseNames","onsuccess","evt","slice","close","onupgradeneeded","transaction","abort","Log","msg","place","console","log","stack","Obj","targetObj","sourceObj","isRecursive","isObject","isStrict","arrOfObject","findFieldName","findFieldValue","defValue","arrLength","stat","alphabette","ENG","RUS","Text","words","isPrevAlphabette","len","currChar","source","transformNode","XSLTProcessor","xsltProcessor","importStylesheet","resultDocument","transformToDocument","XMLSerializer","serializeToString","async","loadXML","DOMParser","parseFromString","isArray","isFinite","Helper_typeof","isDefined","isString","elNav","elNavIcon","Nav","onNavIconClick","onNavClick","event","classList","toggle","go2section","sectionId","App","Component","Loadmask","show","localize","setTimeout","getElementById","add","scrollIntoView","hide","Setlang","display","Study","Library","elLangGui","elLangGuiTplOptions","elLangStudy","elLangStudyTplOptions","isDisplayed","cloneNode","onSubmit","appEnv","languages","newElLangGui","newElLangStudy","langGui","langStudy","preventDefault","localizeGui","KeyVal","LastSession","put","bookHash","bookPosition","Statistic","WordsStudy","getStat","cntStudy","cntStudied","catch","addDebug","User","Menu","selector","callbackOnClick","elContext","Menu_classCallCheck","isFunction","ErrorApp","elements","onClick","menuItem","closest","x","y","left","top","Struct","version","Books","getDb","objectStore","ErrorUser","_this","replaceMembers","md5","retDb","getByHash","foundBook","putResult","delete","getNormalizedLang","openCursor","cursor","continue","KEYS","LAST_SESSION","inpData","struct","oldStruct","newStruct","isStudy","isFinishedLang1ToLang2","isFinishedLang2ToLang1","getStruct","getNormalizedWord","getStructFromData","filters","from","to","cnr","IDBKeyRange","only","_this2","resDb","existsStruct","count","TRUE","normalizedLang","_this3","getCountStudy","cnt","FALSE","langFrom","langTo","WordsTranslate","Date","now","_db","boolValue","webkitStorageInfo","queryUsageAndQuota","TEMPORARY","used","remaining","mozIndexedDB","webkitIndexedDB","msIndexedDB","request","onblocked","onUpgradeNeeded","onversionchange","onVersionChange","onclose","onClose","tmpObjStore","oldVersion","createObjectStore","keyPath","autoIncrement","createIndex","unique","toUpperCase","elContainer","elTplItem","bookMenu","books","BooksList","getEl","onListClick","onBookMenuClick","getAll","clean","newItem","concat","img","src","_load","itemEl","setContext","showAt","clientX","clientY","bookToReadByHash","WinMsg","message","loadAndDisplay","menuItemAction","context","bookRead","bookDelete","elInput","LoadFromFile","onInputButtonClick","onInputFileChange","click","loadTextFromInputFile","srcElement","bookToRead","init","WinWordActions","onStudied","onStudy","throwError","onclick","contains","onCancel","emptyFn","Read","onTextClick","elText","wordsStudy","getAllAsObject","resWords","parseBook","containerTitle","titleLine","elLine","getWords","newElWord","getWordHash","normalizedWord","wordElMark","WORD_STATE","WORD_STATE_STUDY","WORD_STATE_STUDYED","WORD_STATE_UNKNOWN","containerSubtext","textLine","getWordTranslate","wordStudyAdd","wordsMark","WordStudyedAdd","elDialog","elWord","state","classWordHash","elTbody","elTplTr","rowStruct","rows","countPerPage","currentPage","totalPages","elGrid","Grid","onBbarBtnNextClick","onBbarBtnPrevClick","onBbarBtnGotopageClick","getCountForLang","ceil","_loadDataTable","wordsList","newRow","getWordsTranslate","translates","translateStruct","getObjectFromArray","_this4","pageIndex","parseInt","isNumber","lastPage","reload","_this5","_loadData","addRow","row","elTr","cnrWord","elIsStudy","PressCancel","wordsTranslate","wordsStudyProgress","tplItem","isMemorized","cntCorrect","cntWrong","algLang1ToLang2","algLang2ToLang1","defaults","cntWordForStudy","cntCorrectForPass","elStudy","onButtonStartClick","cntToStudy","getForStudy","wordsForStudy","wordsForTranslate","wordStruct","translateStructArray","doStudy","clearProgress","doStudyLang1ToLang2","updateIdbWordStudy","doStudyLang2ToLang1","WinWordCard","getFieldsAsArray","textButtonClose","promises","wordStudyStruct","progressItemLang1ToLang2","progressItemLang2ToLang1","wordStudyData","getBool","currentSet","answers","cnrAttempt","doExam","wordIndex","answer","unstudiedWords","wordStudy","progressItem","wordsStudyIndex","random","correctAnswer","onMemorized","ErrorUserPressCancel","onAnswerCorrect","onAnswerWrong","_this6","showedAt","minTimeShow","timerHide","clearTimeout","setMessage","timeLeftMs","timeShedule","callback","elTplAnswer","elAnsvers","newElAnswer","Errors","_loadedLang","_translates","_unknownTranslates","Localize","getXhr","status","parse","responseText","load","addUnknownTranslate","isNull","selectibleTags","body","onmousedown","tagName","onselectstart","loadEnv","lastSession","lastBook","isBookReaded","resBook","isAdd","getBookFromText","fb2","displayBook","isReturnStruct","google","getTranslateConverted","isEmpty","promices","results","rowId","isSuccess","hashCode","elList","elTranslate","app_Helper","app_App_App","run"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 289);\n","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Menu.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Menu.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Menu.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../node_modules/postcss-loader/src/index.js??ref--5-3!./reset.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../node_modules/postcss-loader/src/index.js??ref--5-3!./reset.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../node_modules/postcss-loader/src/index.js??ref--5-3!./reset.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../node_modules/postcss-loader/src/index.js??ref--5-3!./App.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../node_modules/postcss-loader/src/index.js??ref--5-3!./App.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../node_modules/postcss-loader/src/index.js??ref--5-3!./App.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Component.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Component.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Component.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Nav.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Nav.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Nav.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Setlang.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Setlang.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Setlang.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Statistic.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Statistic.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Statistic.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Library.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Library.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Library.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Read.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Read.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Read.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinWordActions.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinWordActions.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinWordActions.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Study.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Study.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Study.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Grid.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Grid.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Grid.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Loadmask.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Loadmask.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./Loadmask.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinMsg.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinMsg.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinMsg.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinWordCard.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinWordCard.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../../node_modules/postcss-loader/src/index.js??ref--5-3!./WinWordCard.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","'use strict';\r\nexport default class Ajax{\r\n\t/**\r\n\t * Возвращает XHR в зависимости от браузера.\r\n\t * @return {XMLHttpRequest}\r\n\t */\r\n\tstatic getXhr() {\r\n\t\tlet xhr;\r\n\t\ttry {\r\n\t\t\txhr = new XMLHttpRequest();\r\n\t\t} catch (e) {\r\n\t\t\ttry {\r\n\t\t\t\txhr = new ActiveXObject(\"Msxml2.XMLHTTP.6.0\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\txhr = new ActiveXObject(\"Msxml2.XMLHTTP.3.0\");\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\txhr = new ActiveXObject(\"Msxml2.XMLHTTP\");\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\txhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthrow new Error(\"This browser does not support XMLHttpRequest.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn xhr;\r\n\t}\r\n}","'use strict';\r\n\r\nimport Helper from '../Helper';\r\n\r\nexport default class Fb2 {\r\n\t/**\r\n\t * Формирует книгу из текста FB2.\r\n\t * @param text\r\n\t */\r\n\tstatic getBookFromText(text) {\r\n\t\tlet tplBook = {\r\n\t\t\t\tlang: undefined,\r\n\t\t\t\timage: undefined,\r\n\t\t\t\ttitle: [],\r\n\t\t\t\tsections: []\r\n\t\t\t},\r\n\t\t\ttplBookSection = {\r\n\t\t\t\ttitle: [],\r\n\t\t\t\tp: []\r\n\t\t\t},\r\n\t\t\tbook = Object.assign({}, tplBook);\r\n\t\tbook.title = [];\r\n\t\tbook.sections = [];\r\n\t\tlet xml = Helper.Xml.getXMLFromString(text);\r\n\t\tlet encoding = xml.xmlEncoding || xml.charset || xml.characterSet;\r\n\t\tencoding = (encoding || '').toLowerCase();\r\n\t\tif (encoding !== 'utf-8') {\r\n\t\t\tthrow new Error('Кодировка книги не поддерживается.');\r\n\t\t}\r\n\t\t// console.log(xml);\r\n\t\tbook.lang = xml.querySelector('description>title-info>lang').innerHTML;\r\n\r\n\t\tlet headerTitle = xml.querySelector('description>title-info>book-title').innerHTML;\r\n\t\tif (headerTitle) {\r\n\t\t\tbook.title.push(headerTitle);\r\n\t\t} else {\r\n\t\t\txml.querySelectorAll('body>title>p').forEach((elP) => {\r\n\t\t\t\tbook.title.push(elP.innerHTML);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tbook.image = xml.querySelector('description>title-info>coverpage>image');\r\n\t\tif (!book.image) {\r\n\t\t\tbook.image = xml.querySelector('body>image');\r\n\t\t}\r\n\t\tif (book.image) {\r\n\t\t\tbook.image = getImage(book.image.getAttribute('l:href'));\r\n\t\t}\r\n\r\n\t\tfunction getImage(href) {\r\n\t\t\tlet imageEl = xml.querySelector('binary[id=\"' + href.substr(1) + '\"');\r\n\t\t\tif (imageEl) {\r\n\t\t\t\treturn imageEl.innerHTML;\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\txml.querySelector('body').querySelectorAll('section').forEach((elSection) => {\r\n\t\t\tlet section = Object.assign({}, tplBookSection);\r\n\t\t\tsection.title = [];\r\n\t\t\tsection.p = [];\r\n\t\t\telSection.querySelector('title').querySelectorAll('p').forEach((elP) => {\r\n\t\t\t\tsection.title.push(elP.innerHTML);\r\n\t\t\t});\r\n\t\t\telSection.querySelectorAll('p').forEach((elP) => {\r\n\t\t\t\tlet text = '';\r\n\t\t\t\telP.childNodes.forEach((node) => {\r\n\t\t\t\t\tif (node.nodeType === 3) {\r\n\t\t\t\t\t\ttext += node.textContent;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tsection.p.push(text);\r\n\t\t\t});\r\n\t\t\tbook.sections.push(section);\r\n\t\t});\r\n\t\treturn book;\r\n\t}\r\n};\r\n","'use strict';\nexport default class Google {\n\tstatic getTranslateConverted(googleStruct) {\n\t\tlet result = {\n\t\t\twordLang: undefined,\n\t\t\tword: undefined,\n\t\t\ttranslate: undefined,\n\t\t\tscore: undefined\n\t\t};\n\t\tresult.wordLang = googleStruct.data[2];\n\t\tresult.word = googleStruct.data[0][0][1];\n\t\tresult.translate = googleStruct.data[0][0][0];\n\t\tresult.score = googleStruct.data[6];\n\t\treturn result;\n\t}\n\n\tstatic translate(translateTo, text, translateFrom = 'auto') {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst url = \"https://translate.googleapis.com/translate_a/single?\"\n\t\t\t\t+ \"client=gtx\"\n\t\t\t\t+ \"&sl=\" + translateFrom\n\t\t\t\t+ \"&tl=\" + translateTo\n\t\t\t\t+ \"&dt=t\"\n\t\t\t\t+ \"&q=\" + encodeURI(text);\n\n\t\t\tfetch(url).then(response => {\n\t\t\t\tresponse.json().then(data => {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tword: data[0][0][0],\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t})\n\t\t\t\t}, reject)\n\t\t\t}, reject)\n\t\t});\n\t}\n\n\t/**\n\t * @TODO: Разобраться почему не работает\n\t * @param options\n\t */\n\tstatic translateXhr(options) {\n\t\tif (typeof(options) !== 'object') {\n\t\t\tthrow new Error('options - не объект');\n\t\t}\n\t\tlet xhr = new XMLHttpRequest();\n\t\t// single?client=gtx&sl=auto&dt=t&dt=bd&dj=1&text={{some%20tex}}t&tl=ru\n\t\tlet formData = new FormData();\n\t\tformData.append('client', 'gtx');\n\t\tformData.append('sl', 'auto');\n\t\tformData.append('dt', 't');\n\t\tformData.append('dt', 'bd');\n\t\tformData.append('dj', '1');\n\t\tformData.append('tl', 'ru');\n\t\tformData.append('text', options.word);\n\t\tlet url = 'https://translate.googleapis.com/translate_a/single';\n\t\tlet urlGet = url + '?';\n\t\tfor (var pair of formData.entries()) {\n\t\t\t//console.log(pair[0]+ ', '+ pair[1]);\n\t\t\turlGet += ((urlGet.substr(-1, 1) === '?' ? '' : '&') + encodeURIComponent(pair[0]) + '=' + encodeURIComponent(pair[1]));\n\t\t}\n\t\txhr.open('GET', urlGet);\n\t\t//xhr.responseType = 'arraybuffer';\n\t\txhr.withCredentials = true;\n\t\txhr.setRequestHeader('Destination', url);\n\t\txhr.setRequestHeader(\"Access-Control-Allow-Headers\", \"*\");\n\t\t// xhr.setRequestHeader(\"Origin\", \"http://localhost\");\n\t\t//xhr.setRequestHeader(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n\t\txhr.send(formData);\n\t\txhr.upload.onload = () => {\n\t\t\talert('aaa')\n\t\t};\n\t\txhr.addEventListener('readystatechange', function () {\n\t\t\tif (xhr.readyState !== 4) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar header = xhr.getResponseHeader('Content-Disposition');\n\t\t\tlet type = xhr.getResponseHeader('Content-Type');\n\t\t\t// debugger;\n\t\t\talert('@TODO: Как читать ответ, который приходит в заголовке <content-disposition: attachment; filename=\"f.txt\">')\n\t\t\txhr.upload.onload = () => {\n\t\t\t\talert('aaa')\n\t\t\t};\n\t\t\t//let json = JSON.parse(xhr.responseText);\n\t\t\t//console.log('google result', json);\n\t\t});\n\t\t// xhr.onload = function () {\n\t\t//     var header = xhr.getResponseHeader('Content-Disposition');\n\t\t//     var startIndex = header.indexOf(\"filename=\") + 10; // Adjust '+ 10' if filename is not the right one.\n\t\t//     var endIndex = contentDisposition.length - 1; //Check if '- 1' is necessary\n\t\t//     var filename = contentDisposition.substring(startIndex, endIndex);\n\t\t//     console.log(\"filename: \" + filename)\n\t\t// }\n\t}\n};\n","'use strict';\nconst Base62 = {\n\tchars: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n\tencode(n) {\n\t\tlet s = '';\n\t\tdo {\n\t\t\ts = this.chars[n % 62] + s;\n\t\t}\n\t\twhile (n = Math.floor(n / 62));\n\t\treturn s;\n\t},\n\tdecode(s) {\n\t\tlet q = s.length,\n\t\t\tw,\n\t\t\te = 0,\n\t\t\tr = 0;\n\t\twhile (q--) {\n\t\t\tif (w = this.chars.indexOf(s[q])) {\n\t\t\t\tr += w * Math.pow(62, e);\n\t\t\t}\n\t\t\t++e;\n\t\t}\n\t\treturn r;\n\t}\n};\n\nexport default class Hash {\n\tstatic get Base62() {\n\t\treturn Base62;\n\t}\n\n\t/**\n\t * Возвращает простой хеш строки.\n\t * @param str\n\t * @returns {number}\n\t */\n\tstatic hashCode(str) {\n\t\tlet hash = 0;\n\t\tif (str.length == 0) {\n\t\t\treturn hash;\n\t\t}\n\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\tlet char = str.charCodeAt(i);\n\t\t\thash = ((hash << 5) - hash) + char;\n\t\t\thash = hash & hash; // Convert to 32bit integer\n\t\t}\n\t\thash = Math.abs(hash);\n\t\thash = hash.toString(16);\n\t\treturn hash;\n\t}\n\n\tstatic md5(d) {\n\t\tlet result = M(V(Y(X(d), 8 * d.length)));\n\t\treturn result.toLowerCase()\n\n\t\tfunction M(d) {\n\t\t\tfor (var _, m = \"0123456789ABCDEF\", f = \"\", r = 0; r < d.length; r++) {\n\t\t\t\t_ = d.charCodeAt(r), f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _);\n\t\t\t}\n\t\t\treturn f\n\t\t}\n\n\t\tfunction X(d) {\n\t\t\tfor (var _ = Array(d.length >> 2), m = 0; m < _.length; m++) {\n\t\t\t\t_[m] = 0;\n\t\t\t}\n\t\t\tfor (m = 0; m < 8 * d.length; m += 8) {\n\t\t\t\t_[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32;\n\t\t\t}\n\t\t\treturn _\n\t\t}\n\n\t\tfunction V(d) {\n\t\t\tfor (var _ = \"\", m = 0; m < 32 * d.length; m += 8) {\n\t\t\t\t_ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255);\n\t\t\t}\n\t\t\treturn _\n\t\t}\n\n\t\tfunction Y(d, _) {\n\t\t\td[_ >> 5] |= 128 << _ % 32, d[14 + (_ + 64 >>> 9 << 4)] = _;\n\t\t\tfor (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) {\n\t\t\t\tvar h = m, t = f, g = r, e = i;\n\t\t\t\tf = md5_ii(f = md5_ii(f = md5_ii(f = md5_ii(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_ff(f = md5_ff(f = md5_ff(f = md5_ff(f, r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551), m = safe_add(m, h), f = safe_add(f, t), r = safe_add(r, g), i = safe_add(i, e)\n\t\t\t}\n\t\t\treturn Array(m, f, r, i)\n\t\t}\n\n\t\tfunction md5_cmn(d, _, m, f, r, i) {\n\t\t\treturn safe_add(bit_rol(safe_add(safe_add(_, d), safe_add(f, i)), r), m)\n\t\t}\n\n\t\tfunction md5_ff(d, _, m, f, r, i, n) {\n\t\t\treturn md5_cmn(_ & m | ~_ & f, d, _, r, i, n)\n\t\t}\n\n\t\tfunction md5_gg(d, _, m, f, r, i, n) {\n\t\t\treturn md5_cmn(_ & f | m & ~f, d, _, r, i, n)\n\t\t}\n\n\t\tfunction md5_hh(d, _, m, f, r, i, n) {\n\t\t\treturn md5_cmn(_ ^ m ^ f, d, _, r, i, n)\n\t\t}\n\n\t\tfunction md5_ii(d, _, m, f, r, i, n) {\n\t\t\treturn md5_cmn(m ^ (_ | ~f), d, _, r, i, n)\n\t\t}\n\n\t\tfunction safe_add(d, _) {\n\t\t\tvar m = (65535 & d) + (65535 & _);\n\t\t\treturn (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m\n\t\t}\n\n\t\tfunction bit_rol(d, _) {\n\t\t\treturn d << _ | d >>> 32 - _\n\t\t}\n\t}\n};","'use strict';\n/**\n * Io - Input|Output\n * @type {{}}\n */\nexport default class Io {\n\tstatic loadTextFromInputFile(elFile) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet files = elFile.files;\n\t\t\tlet reader = new FileReader();\n\t\t\treader.onload = (e) => {\n\t\t\t\tresolve(e.target.result);\n\t\t\t};\n\t\t\treader.onerror = () => {\n\t\t\t\treject();\n\t\t\t};\n\t\t\treader.readAsText(files[0]);\n\t\t});\n\t}\n};\n\n","'use strict';\n/**\n * Idb- IndexedDB\n * @type {{}}\n */\nexport default class Idb {\n\t/**\n\t * Проверяет существует ли БД.\n\t * @note: не работает в IE11\n\t * @param dbName\n\t * @param callback\n\t */\n\tstatic isDbExists(dbName) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar db = indexedDB,\n\t\t\t\treq;\n\t\t\ttry {\n\t\t\t\t// See if it exist\n\t\t\t\treq = db.webkitGetDatabaseNames();\n\t\t\t\treq.onsuccess = function (evt) {\n\t\t\t\t\t~([].slice.call(evt.target.result)).indexOf(dbName) ?\n\t\t\t\t\t\tresolve(true) :\n\t\t\t\t\t\treject(false);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// Try if it exist\n\t\t\t\treq = db.open(dbName);\n\t\t\t\treq.onsuccess = function () {\n\t\t\t\t\treq.result.close();\n\t\t\t\t\tresolve(true);\n\t\t\t\t};\n\t\t\t\treq.onupgradeneeded = function (evt) {\n\t\t\t\t\tevt.target.transaction.abort();\n\t\t\t\t\treject(false);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n","export default class Log {\r\n\tstatic addDebug(msg, place) {\r\n\t\tconsole.log('@DEBUG:', {\r\n\t\t\tmsg: msg,\r\n\t\t\tplace: place || new Error().stack\r\n\t\t})\r\n\t};\r\n\r\n\tstatic addTodo(msg, place) {\r\n\t\tconsole.log('@TODO:', {\r\n\t\t\tmsg: msg,\r\n\t\t\tplace: place || new Error().stack\r\n\t\t});\r\n\t};\r\n};\r\n\r\n\r\n","'use strict';\n\nimport Helper from '../Helper';\n\n/**\n *\n * @type {Object}\n */\nexport default class Obj {\n\t/**\n\t * Копирует свойства из одного объекта в другой.\n\t * @param {Object} targetObj - Целевой объект. В него заливаются свойства.\n\t * @param {Object} sourceObj - Объект-источник. Из него извлекаются свойства.\n\t * @param {Boolean} isRecursive - Флаг, определяющий алгоритм работы со свойствами-объектами.\n\t * Если false, то свойство будет скопировано (как новый объект, т.е. на выходе не ссылка).\n\t * Если true, то к свойствам targetObj будут подмешаны свойства из sourceObj.\n\t */\n\tstatic apply(targetObj, sourceObj, isRecursive) {\n\t\tisRecursive = isRecursive || false;\n\t\tfor (let key in sourceObj) {\n\t\t\tif (Helper.isObject(sourceObj[key])) {\n\t\t\t\tif (isRecursive) {\n\t\t\t\t\tHelper.Obj.apply(targetObj[key], sourceObj[key]);\n\t\t\t\t} else {\n\t\t\t\t\ttargetObj[key] = Object.assign({}, sourceObj[key]);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttargetObj[key] = sourceObj[key];\n\t\t}\n\t}\n\n\t/**\n\t * Переопределяет значения свойств targetObj значениями из sourceObj.\n\t * При этом свойство должно присутствовать в targetObj.\n\t * Если свойство не найдено в targetObj и включен режим isStrict, то генерируется исключение.\n\t * @param targetObj\n\t * @param sourceObj\n\t * @param isStrict\n\t */\n\tstatic replaceMembers(targetObj, sourceObj, isStrict) {\n\t\tisStrict = isStrict === undefined ? true : isStrict;\n\t\tfor (let key in sourceObj) {\n\t\t\tif (key in targetObj) {\n\t\t\t\ttargetObj[key] = sourceObj[key];\n\t\t\t} else if (isStrict) {\n\t\t\t\tthrow new Error('Поле \"' + key + '\" не найдено в целевом объекте');\n\t\t\t}\n\t\t}\n\t\treturn targetObj;\n\t}\n\n\t/**\n\t * Возвращает в виде массива занчения полей оюбъектов, которые переданы в массиве \"arrOfObject\".\n\t * @param arrOfObject\n\t * @param findFieldName\n\t * @return {Array}\n\t */\n\tstatic getFieldsAsArray(arrOfObject, findFieldName) {\n\t\tlet result = [];\n\t\tarrOfObject.forEach((obj) => {\n\t\t\tif (!Helper.isObject(obj)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (findFieldName in obj) {\n\t\t\t\tresult.push(obj[findFieldName]);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t};\n\n\t/**\n\t * Ищет в массиве объектов \"arrOfObject\" 1й элемент, у которого поле \"findFieldName\"\n\t * содержит значение \"findFieldValue\".\n\t * Если найдено, возвращает найденный элемент.\n\t * Если не найдено, возвращает \"defValue\"\n\t * @param arrOfObject\n\t * @param findFieldName\n\t * @param findFieldValue\n\t * @param defValue\n\t * @return {*}\n\t */\n\tstatic getObjectFromArray(arrOfObject, findFieldName, findFieldValue, defValue = undefined) {\n\t\tfor (let i = 0, arrLength = arrOfObject.length; i < arrLength; i++) {\n\t\t\tif (arrOfObject[i][findFieldName] === findFieldValue) {\n\t\t\t\treturn arrOfObject[i];\n\t\t\t}\n\t\t}\n\t\treturn defValue;\n\t};\n};\n","'use strict';\nconst stat ={\n\talphabette : {\n\t\tENG: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\\'',\n\t\tRUS: 'абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ1234567890'\n\t}\n};\n\nexport default class Text {\n\t/**\n\t * Извлекает слова и текста и возвращает в виде массива.\n\t * При извлечении используются словарь для языка.\n\t * @param lang\n\t * @param str\n\t * @return {Array}\n\t */\n\tstatic getWords(lang, str) {\n\t\tlet words = [];\n\t\tlet word = '';\n\t\tlet separatorsInclude = ',-';\n\t\tlet separatorsExclude = ' ';\n\t\tlet punctuation = '?!.';\n\t\tlet isPrevAlphabette = true;\n\t\tlet alphabette = stat.alphabette[lang];\n\t\tfor (let i = 0, len = str.length; i < len; i++) {\n\t\t\tlet currChar = str[i];\n\t\t\tif (alphabette.indexOf(currChar) >= 0) {\n\t\t\t\tif (!isPrevAlphabette) {\n\t\t\t\t\twords.push(word);\n\t\t\t\t\tword = '';\n\t\t\t\t\tisPrevAlphabette = true;\n\t\t\t\t}\n\t\t\t\tword += currChar;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (word !== '') {\n\t\t\t\tif (isPrevAlphabette) {\n\t\t\t\t\twords.push(word);\n\t\t\t\t\tword = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (punctuation.indexOf(currChar) >= 0) {\n\t\t\t\tif (word !== '') {\n\t\t\t\t\twords.push(word);\n\t\t\t\t\tword = '';\n\t\t\t\t}\n\t\t\t\twords.push(currChar);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (separatorsInclude.indexOf(currChar) >= 0) {\n\t\t\t\tif (word !== '') {\n\t\t\t\t\twords.push(word);\n\t\t\t\t\tword = '';\n\t\t\t\t}\n\t\t\t\twords.push(currChar);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (separatorsExclude.indexOf(currChar) >= 0) {\n\t\t\t\tif (word !== '') {\n\t\t\t\t\twords.push(word);\n\t\t\t\t\tword = '';\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tword += currChar;\n\t\t\tisPrevAlphabette = false;\n\t\t}\n\t\tif (word !== '') {\n\t\t\twords.push(word);\n\t\t}\n\t\treturn words;\n\t}\n};\n","'use strict';\n/**\n * Помошник для работы с XML.\n */\nexport default class Xml {\n\t/**\n\t * Выполняет XSLT-преобразование и возвращает результат в виде строки текста.\n\t * @param source\n\t * @param style\n\t * @return {String|null}\n\t */\n\tstatic transformXslt(source, style) {\n\t\tlet result = null;\n\t\tif (window.ActiveXObject) {\n\t\t\tresult  = source.transformNode(style);\n\t\t} else if (window.XSLTProcessor) {\n\t\t\tlet xsltProcessor = new XSLTProcessor();\n\t\t\txsltProcessor.importStylesheet(style);\n\t\t\tlet resultDocument = xsltProcessor.transformToDocument(source);\n\t\t\tlet xmls = new XMLSerializer();\n\t\t\tresult = xmls.serializeToString(resultDocument);\n\t\t} else {\n\t\t\talert(\"XML-transform not supported\");\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Возвращает XMLDocument из XML-текста.\n\t * @param {String} s - XML-текст\n\t * @return {Document|null}\n\t */\n\tstatic getXMLFromString (s) {\n\t\tlet result = null;\n\t\tif (window.ActiveXObject) {\n\t\t\tlet xml;\n\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\txml.async = false;\n\t\t\txml.loadXML(s);\n\t\t\tresult = xml;\n\t\t}\n\t\telse if (window.DOMParser) {\n\t\t\tlet parser = new DOMParser();\n\t\t\tresult = parser.parseFromString(s, 'text/xml');\n\t\t} else {\n\t\t\talert(\"XML load not supported\");\n\t\t}\n\t\treturn result;\n\t}\n};\n\n","import Ajax from './Helper/Ajax';\nimport Fb2 from './Helper/Fb2';\nimport Google from './Helper/Google';\nimport Hash from './Helper/Hash';\nimport Io from './Helper/Io';\nimport Idb from './Helper/Idb';\nimport Log from './Helper/Log';\nimport Obj from './Helper/Obj';\nimport Text from './Helper/Text';\nimport Xml from './Helper/Xml';\n\nclass Helper {\n\t/** ----------------------------------------------\n\t *  Внешние методы\n\t */\n\tstatic get Ajax() {\n\t\treturn Ajax;\n\t}\n\n\tstatic get Fb2() {\n\t\treturn Fb2;\n\t}\n\n\tstatic get Google() {\n\t\treturn Google;\n\t}\n\n\tstatic get Hash() {\n\t\treturn Hash;\n\t}\n\n\tstatic get Io() {\n\t\treturn Io;\n\t}\n\n\tstatic get Idb() {\n\t\treturn Idb;\n\t}\n\n\tstatic get Log() {\n\t\treturn Log;\n\t}\n\n\tstatic get Obj() {\n\t\treturn Obj;\n\t}\n\n\tstatic get Text() {\n\t\treturn Text;\n\t}\n\n\tstatic get Xml() {\n\t\treturn Xml;\n\t}\n\n\t/** ----------------------------------------------\n\t *  Собственные методы\n\t */\n\n\tstatic emptyFn() {\n\t}\n\n\tstatic isArray(value) {\n\t\treturn Array.isArray(value);\n\t}\n\n\tstatic isBoolean(value) {\n\t\treturn typeof value === 'boolean';\n\t}\n\n\tstatic isNumber(value) {\n\t\treturn typeof value === 'number' && isFinite(value);\n\t}\n\n\tstatic isObject(value) {\n\t\treturn typeof(value) === 'object';\n\t}\n\n\tstatic isString(value) {\n\t\treturn typeof(value) === 'string';\n\t}\n\n\tstatic isDefined(value) {\n\t\treturn typeof value !== 'undefined';\n\t}\n\n\tstatic isNull(value) {\n\t\treturn value === null;\n\t}\n\n\tstatic isFunction(value) {\n\t\treturn typeof value === 'function';\n\t}\n\n\tstatic isEmpty(value) {\n\t\tif (!Helper.isDefined(value)) {\n\t\t\treturn false;\n\t\t} else if (Helper.isString(value)) {\n\t\t\treturn value === '';\n\t\t}\n\t\treturn false;\n\t}\n}\n\n// ES5\n//module.exports = Helper\n\n// ES6\nexport default Helper;\n","'use strict';\r\n\r\nimport './Menu.css';\r\nimport './Nav.css';\r\n\r\n// import Component from '../Component';\r\n\r\n\r\nconst stat = {\r\n\t/**\r\n\t * Ссылка на DOM-элемент \"Навигация\"\r\n\t */\r\n\telNav: undefined,\r\n\t/**\r\n\t * Ссылка на DOM-элемент \"Иконка еавигации\".\r\n\t */\r\n\telNavIcon: undefined\r\n};\r\n/**\r\n * Раздел секции \"Статистика\"\r\n */\r\nexport default class Nav {\r\n\r\n\tstatic init() {\r\n\t\tstat.elNav = document.querySelector('nav.nav');\r\n\t\tstat.elNavIcon = document.querySelector('.nav-icon');\r\n\t\t// Обработчики навигации\r\n\t\tstat.elNavIcon.addEventListener('click', this.onNavIconClick.bind(this));\r\n\t\tstat.elNav.addEventListener('click', this.onNavClick.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * Клик по иконке \"Меню\".\r\n\t * По этому действию нужно отобразить меню.\r\n\t * @param event\r\n\t */\r\n\tstatic onNavIconClick(event) {\r\n\t\tstat.elNav.classList.remove('hidden');\r\n\t\tstat.elNav.classList.toggle('opened');\r\n\t}\r\n\r\n\t/**\r\n\t * Обработчик нажатия на элемент навигации.\r\n\t * Если кликнули на ссылку, то выполняет переход к выбранному блоку и скрывает меню.\r\n\t * @param event\r\n\t */\r\n\tstatic onNavClick(event) {\r\n\t\tlet href = event.target.getAttribute('href');\r\n\t\tif (href === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.go2section(href.substr(1));\r\n\t\tstat.elNav.classList.toggle('opened');\r\n\t}\r\n\r\n\t/**\r\n\t * Выполняет навигацию к указанной секции.\r\n\t * @param sectionId\r\n\t */\r\n\tstatic go2section(sectionId) {\r\n\t\tdocument.App.Component.Loadmask.show(document.App.localize('Навигация...'));\r\n\t\tsetTimeout(() => {\r\n\t\t\tlet sections = document.getElementById('content').querySelectorAll('section');\r\n\t\t\tsections = [].slice.call(sections);\r\n\t\t\tsections.forEach((elSection) => {\r\n\t\t\t\telSection.classList.add('hidden');\r\n\t\t\t});\r\n\t\t\tdocument.getElementById(sectionId).classList.remove('hidden');\r\n\t\t\tdocument.getElementById(sectionId).scrollIntoView();\r\n\t\t\tdocument.App.Component.Loadmask.hide();\r\n\t\t\tswitch (sectionId) {\r\n\t\t\t\tcase 'setlang' :\r\n\t\t\t\t\tdocument.App.Component.Setlang.display();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'study' :\r\n\t\t\t\t\tdocument.App.Component.Study.display();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'library' :\r\n\t\t\t\t\tdocument.App.Component.Library.display();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}, 50);\r\n\t}\r\n};","'use strict';\n\nimport './Setlang.css';\n\n/**\n * Контейнер для пвевдостатических полей.\n * @type {Object}\n */\nconst stat = {\n\tel: undefined,\n\telLangGui: undefined,\n\telLangGuiTplOptions: undefined,\n\n\telLangStudy: undefined,\n\telLangStudyTplOptions: undefined,\n\n\tisDisplayed: false\n};\n\n\n/**\n * Компонент \"Установка языка\".\n * Позволяет установить родной и изучаемый языки.\n */\nexport default class Setlang {\n\tstatic init() {\n\t\tstat.el = document.getElementById('setlang');\n\n\t\tstat.elLangGui = stat.el.querySelector('select[name=\"lang-gui\"]');\n\t\tstat.elLangGuiTplOptions = stat.elLangGui.querySelector('option.tpl').cloneNode(true);\n\t\tstat.elLangGuiTplOptions.classList.remove('tpl');\n\n\t\tstat.elLangStudy = stat.el.querySelector('select[name=\"lang-study\"]');\n\t\tstat.elLangStudyTplOptions = stat.elLangStudy.querySelector('option.tpl').cloneNode(true);\n\t\tstat.elLangStudyTplOptions.classList.remove('tpl');\n\n\t\tstat.el.querySelector('.button-submit').addEventListener('click', this.onSubmit.bind(this));\n\t}\n\n\tstatic display() {\n\t\tif (this.isDisplayed) {\n\t\t\treturn;\n\t\t}\n\t\tstat.elLangGui.innerHTML = '';\n\t\tstat.elLangStudy.innerHTML = '';\n\t\tfor (let lang in document.App.appEnv.languages) {\n\t\t\tlet newElLangGui = stat.elLangStudyTplOptions.cloneNode(true);\n\t\t\tnewElLangGui.value = lang;\n\t\t\tnewElLangGui.innerHTML = document.App.appEnv.languages[lang];\n\t\t\tstat.elLangGui.appendChild(newElLangGui);\n\n\t\t\tlet newElLangStudy = stat.elLangStudyTplOptions.cloneNode(true);\n\t\t\tnewElLangStudy.value = lang;\n\t\t\tnewElLangStudy.innerHTML = document.App.appEnv.languages[lang];\n\t\t\tstat.elLangStudy.appendChild(newElLangStudy);\n\t\t}\n\t\tstat.elLangGui.value = document.App.langGui;\n\t\tstat.elLangStudy.value = document.App.langStudy;\n\t\t// document.App.Component.Setlang.BooksList.loadAndDisplay();\n\t\tthis.isDisplayed = true;\n\t}\n\n\tstatic onSubmit(event) {\n\t\tevent.preventDefault();\n\t\tdocument.App.langGui = stat.elLangGui.value;\n\t\tdocument.App.langStudy = stat.elLangStudy.value;\n\t\tdocument.App.localizeGui();\n\t\treturn document.App.Idb.KeyVal.LastSession.put({\n\t\t\tlangGui: document.App.langGui,\n\t\t\tlangStudy: document.App.langStudy,\n\t\t\tbookHash: undefined,\n\t\t\tbookPosition: undefined\n\t\t}).then(() => {\n\t\t\tdocument.App.Component.Nav.go2section('library');\n\t\t})\n\t}\n};\n","'use strict';\r\n\r\nimport App from '../../App';\r\nimport Helper from '../../Helper';\r\nimport './Statistic.css';\r\n\r\n/**\r\n * Раздел секции \"Статистика\"\r\n */\r\nexport default class Statistic {\r\n\tstatic display() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tApp.Idb.WordsStudy.getStat(document.App.langStudy).then((stat) => {\r\n\t\t\t\tdocument.getElementById('statistic').querySelector('.stat-words-study').innerHTML = stat.cntStudy || 0;\r\n\t\t\t\tdocument.getElementById('statistic').querySelector('.stat-words-studied').innerHTML = stat.cntStudied || 0;\r\n\t\t\t\tresolve(true);\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tHelper.Log.addDebug('Непредвиденная ошибка при получении статистики изучения слов');\r\n\t\t\t\tdocument.getElementById('statistic').querySelector('.stat-words-study').innerHTML = '???';\r\n\t\t\t\tdocument.getElementById('statistic').querySelector('.stat-words-studied').innerHTML = '???';\r\n\t\t\t\tresolve(false);\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n};\r\n","'use strict';\r\n\r\nexport default class User extends Error {\r\n}\r\n","'use strict';\r\n//import Errors from '../Errors'\r\n/**\r\n * Ошибки приложения.\r\n * Пользователю не показываем, а сообщааем серверу в фоне.\r\n * @type { document.App.Errors.App}\r\n */\r\nexport default class App extends Error {\r\n};\r\n","'use strict';\r\nimport './Menu.css';\r\nimport Helper from '../../Helper';\r\nimport ErrorApp from '../Errors/App';\r\n\r\n/**\r\n * Компонент \"Меню\".\r\n */\r\nexport default class Menu {\r\n\tconstructor(selector, callbackOnClick, elContext = undefined) {\r\n\t\tif (!Helper.isFunction(callbackOnClick)) {\r\n\t\t\tthrow new ErrorApp('\"callbackOnClick\" - не задан');\r\n\t\t}\r\n\t\tthis.callbackOnClick = callbackOnClick;\r\n\t\tthis.elContext = elContext || undefined;\r\n\t\tthis.el = undefined;\r\n\t\tif (Helper.isString(selector)) {\r\n\t\t\tlet elements = document.querySelectorAll(el);\r\n\t\t\tif (elements.length < 1) {\r\n\t\t\t\tthrow new ErrorApp('Меню не найдено');\r\n\t\t\t} else if (elements.length > 1) {\r\n\t\t\t\tthrow new ErrorApp('Найдено более одного элемента меню');\r\n\t\t\t}\r\n\t\t\tthis.el = elements[0];\r\n\t\t} else {\r\n\t\t\tthis.el = selector;\r\n\t\t}\r\n\t\tthis.el.addEventListener('click', this.onClick.bind(this));\r\n\t\tif (this.elContext) {\r\n\t\t\tthis.elContext.addEventListener('click', this.elContext.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tsetContext(elContext) {\r\n\t\tthis.elContext = elContext;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tonContextClick() {\r\n\t\tthis.show();\r\n\t}\r\n\r\n\tonClick(e) {\r\n\t\tlet menuItem = e.target.closest('.menu-item');\r\n\t\tif (menuItem) {\r\n\t\t\tthis.callbackOnClick(menuItem, menuItem.getAttribute('data-menu-item-id'), this.elContext);\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\tshowAt(x, y) {\r\n\t\tthis.el.style.left = x + 'px';\r\n\t\tthis.el.style.top = y + 'px';\r\n\t\tthis.el.classList.remove('hidden');\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.el.classList.add('hidden');\r\n\t}\r\n}\r\n\r\n\r\n","'use strict';\n\nimport ErrorUser from '../Errors/User'\n\nconst stat = {\n\t/**\n\t * Структура, описывающая хранимую книгу\n\t */\n\tStruct: {\n\t\t/**\n\t\t * Версия структуры на момент записи книги\n\t\t * @type {Number}\n\t\t */\n\t\tversion: 1,\n\t\t/**\n\t\t * Язык книги (Напр. \"ENG\" или \"RUS\")\n\t\t * @type {String}\n\t\t */\n\t\tlang: undefined,\n\t\t/**\n\t\t * Заглавие книги на языке книги.\n\t\t */\n\t\ttitle: undefined,\n\t\t/**\n\t\t * BASE64-кодированное изображение титульной страницы.\n\t\t * @type {String}\n\t\t */\n\t\timage: undefined,\n\t\t/**\n\t\t * MD5-хеш контента книги\n\t\t * @type {String}\n\t\t */\n\t\thash: undefined,\n\t\t/**\n\t\t * Контент FB2-книги\n\t\t * @type {String}\n\t\t */\n\t\tcontent: undefined\n\t}\n};\n\nexport default class Books {\n\n\t/**\n\t *\n\t * @param hash\n\t * @return {Promise<any>}\n\t */\n\tstatic getByHash(hash) {\n\t\tlet result = {\n\t\t\tkey: undefined,\n\t\t\tbook: undefined\n\t\t};\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdocument.App.Idb.getDb().then((db) => {\n\t\t\t\tlet transaction = db.transaction(['Books'], 'readonly'); //readonly - для чтения\n\t\t\t\tlet store = transaction.objectStore('Books');\n\t\t\t\tlet req = store.get(hash);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(req.result);\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\tdocument.Helper.Log.addDebug(event);\n\t\t\t\t\treject(new ErrorUser(document.App.localize('Ошибка при поиске книги по хешу.')));\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param lang\n\t * @param title\n\t * @param image\n\t * @param text\n\t * @return {Promise<any>}\n\t */\n\tstatic add(lang, title, image, text) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet db;\n\t\t\tlet item = Object.assign({}, stat.Struct);\n\t\t\titem = document.Helper.Obj.replaceMembers(item, {\n\t\t\t\tlang: lang,\n\t\t\t\ttitle: title,\n\t\t\t\timage: image,\n\t\t\t\thash: document.Helper.Hash.md5(text),\n\t\t\t\tcontent: text\n\t\t\t});\n\t\t\tdocument.App.Idb.getDb().then((retDb) => {\n\t\t\t\tdb = retDb;\n\t\t\t\treturn this.getByHash(item.hash);\n\t\t\t}).then((foundBook) => {\n\t\t\t\tif (foundBook) {\n\t\t\t\t\treturn foundBook;\n\t\t\t\t}\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet transaction = db.transaction(['Books'], 'readwrite'); //readonly - для чтения\n\t\t\t\t\tlet store = transaction.objectStore('Books');\n\t\t\t\t\tlet req = store.put(item);\n\t\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\t\tresolve(item);\n\t\t\t\t\t};\n\t\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\t\tdocument.Helper.Log.addDebug(event);\n\t\t\t\t\t\treject(new ErrorUser(document.App.localize('Не удалось добавить книгу в БД.')));\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t}).then((putResult) => {\n\t\t\t\tresolve(putResult);\n\t\t\t}).catch((e) => {\n\t\t\t\tdocument.Helper.Log.addDebug(event);\n\t\t\t\treject(e);\n\t\t\t})\n\t\t})\n\t}\n\n\tstatic delete(bookHash){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tdocument.App.Idb.getDb().then((db) => {\n\t\t\t\treturn db;\n\t\t\t}).then((db) => {\n\t\t\t\tlet transaction = db.transaction(['Books'], 'readwrite'); //readonly - для чтения\n\t\t\t\tlet store = transaction.objectStore('Books');\n\t\t\t\tlet req = store.delete(bookHash);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(bookHash);\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\tdocument.Helper.Log.addDebug(event);\n\t\t\t\t\treject(new ErrorUser(document.App.localize('Не удалось удалить книгу из БД.')));\n\t\t\t\t};\n\t\t\t}).catch((e) => {\n\t\t\t\tdocument.Helper.Log.addDebug(event);\n\t\t\t\treject(e);\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic getAll(options) {\n\t\toptions = options || {};\n\t\toptions.filter = options.filter || {};\n\t\tif (document.Helper.isDefined(options.filter.lang)) {\n\t\t\toptions.filter.lang = document.App.Idb.getNormalizedLang(options.filter.lang);\n\t\t}\n\t\t// options = document.Helper.Obj.replaceMembers({\n\t\t// \tlang : document.App.langStudy\n\t\t// },options);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet result = [];\n\t\t\tdocument.App.Idb.getDb().then((db) => {\n\t\t\t\tlet store = db.transaction(['Books'], 'readonly').objectStore('Books');\n\t\t\t\tlet req = store.openCursor();\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tlet cursor = req.result;\n\t\t\t\t\tif (!cursor) {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (document.Helper.isDefined(options.filter.lang)) {\n\t\t\t\t\t\tif (options.filter.lang === cursor.value.lang) {\n\t\t\t\t\t\t\tresult.push(cursor.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.push(cursor.value);\n\t\t\t\t\t}\n\t\t\t\t\tcursor.continue()\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n};\n","'use strict';\n\nimport ErrorUser from '../../Errors/User'\n\nconst stat ={\n\t/**\n\t * Структура, описывающая последнюю сессию пользователя.\n\t */\n\tStruct: {\n\t\t/**\n\t\t * Версия структуры на момент записи информации.\n\t\t * @type {Number}\n\t\t */\n\t\tversion: 1,\n\t\t/**\n\t\t * Язык пользовательского интерфейса (Напр. \"ENG\" или \"RUS\")\n\t\t * @type {String}\n\t\t */\n\t\tlangGui: undefined,\n\t\t/**\n\t\t * Изучаемый язык (Напр. \"ENG\" или \"RUS\")\n\t\t * @type {String}\n\t\t */\n\t\tlangStudy: undefined,\n\t\t/**\n\t\t * Идентификатор читаемой книги\n\t\t * @type {String}\n\t\t */\n\t\tbookHash: undefined,\n\t\t/**\n\t\t * Позиция читаемой книги, на которой остановился пользователь\n\t\t * @type {Number}\n\t\t */\n\t\tbookPosition: undefined\n\t}\n};\nexport default class LastSession {\n\tstatic get Struct(){\n\t\treturn stat.Struct;\n\t}\n\tstatic get() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t document.App.Idb.getDb().then((db) => {\n\t\t\t\tlet transaction = db.transaction(['KeyVal'], 'readwrite');\n\t\t\t\tlet store = transaction.objectStore('KeyVal');\n\t\t\t\tlet req = store.get( document.App.Idb.KeyVal.KEYS.LAST_SESSION);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(req.result);\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject('Не удалось записать сессию в БД.');\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n\tstatic put(inpData) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t document.App.Idb.getDb().then((db) => {\n\t\t\t\treturn db;\n\t\t\t}).then((db)=>{\n\t\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t\tthis.get().then((struct)=>{\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tdb : db,\n\t\t\t\t\t\t\toldStruct : struct\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}).then((data)=>{\n\t\t\t\tlet newStruct;\n\t\t\t\tif(data.oldStruct){\n\t\t\t\t\tnewStruct = data.oldStruct;\n\t\t\t\t} else{\n\t\t\t\t\tnewStruct = Object.assign({}, this.Struct);\n\t\t\t\t}\n\t\t\t\tnewStruct = document.Helper.Obj.replaceMembers(newStruct, inpData);\n\t\t\t\tlet transaction = data.db.transaction(['KeyVal'], 'readwrite');\n\t\t\t\tlet store = transaction.objectStore('KeyVal');\n\t\t\t\tlet req = store.put(newStruct, document.App.Idb.KeyVal.KEYS.LAST_SESSION);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(req.result);\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject(new ErrorUser( document.App.localize('Не удалось записать сессию в БД.')));\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t}\n};","'use strict';\n\nimport LastSession from './KeyVal/LastSession'\n\nconst stat = {\n\t/**\n\t * Ключи, которыми помечаются записи в таблице.\n\t */\n\tKEYS: {\n\t\t/**\n\t\t * Элемент хранит информацию о последней сессии пользователя\n\t\t */\n\t\tLAST_SESSION: 'KEY_LAST_SESSION'\n\t}\n};\n\nexport default class KeyVal {\n\tstatic get LastSession() {\n\t\treturn LastSession;\n\t}\n\n\tstatic get KEYS() {\n\t\treturn stat.KEYS;\n\t}\n\n\tstatic get(key) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdocument.App.Idb.getDb().then((db) => {\n\t\t\t\tlet store = db.transaction(['KeyVal'], 'readonly').objectStore('KeyVal');\n\t\t\t\tlet req = store.get(key);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(req.result);\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject('Не удалось получить сессию из БД.');\n\t\t\t\t};\n\t\t\t})\n\t\t});\n\t}\n};","'use strict';\n\nimport App from '../../App';\nimport Helper from '../../Helper';\n\nconst stat = {\n\t/**\n\t * Структура, описывающая изучаемое слово.\n\t */\n\tStruct: {\n\t\t/**\n\t\t * Версия структуры на момент записи информации.\n\t\t * @type {Number}\n\t\t */\n\t\tversion: 1,\n\t\t/**\n\t\t * Язык слова (Напр. \"ENG\" или \"RUS\")\n\t\t * @type {String}\n\t\t */\n\t\tlang: undefined,\n\t\t/**\n\t\t * Нормализованный текст слова (Напр. \"dog\", \"яблоко\")\n\t\t * @type {String}\n\t\t */\n\t\tword: undefined,\n\t\t/**\n\t\t * Флаг: Слово для изучения? 0 - нет, 1 - Да.\n\t\t * 0 - слово уже изучено.\n\t\t * 1 - слово не изучено - прогнать через процесс изучения.\n\t\t * @type {Number}\n\t\t */\n\t\tisStudy: undefined,\n\t\t/**\n\t\t * Флаг: Завершено ли изучение слова с родного языка на изучаемый?\n\t\t * 0 - Нет, 1 - Да\n\t\t * @type {Number}\n\t\t */\n\t\tisFinishedLang1ToLang2: undefined,\n\t\t/**\n\t\t * Флаг: Завершено ли изучение слова с изучаемого языка на основной\n\t\t *  0 - Нет, 1 - Да\n\t\t * @type {Number}\n\t\t */\n\t\tisFinishedLang2ToLang1: undefined\n\t}\n};\n/**\n *\n * Объект, предоставляющий интерфейс к таблице \"Изучаемые слова\".\n * @type {Object}}\n */\nexport default class WordsStudy {\n\n\tstatic getStruct() {\n\t\tlet result = Object.assign({}, stat.Struct);\n\t\treturn result;\n\t}\n\n\tstatic getStructFromData(data) {\n\t\tif (!Helper.isDefined(data)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet result = this.getStruct();\n\t\tresult = Helper.Obj.replaceMembers(result, data, false);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Возвращает структуру из БД.\n\t * @param lang\n\t * @param word\n\t */\n\tstatic get(lang, word) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn App.Idb.getDb().then((db) => {\n\t\t\t\tlet store = db.transaction(['WordsStudy'], 'readonly').objectStore('WordsStudy');\n\t\t\t\t//let index = store.index('i-lang-word');\n\t\t\t\t//let req = index.get([ App.Idb.getNormalizedLang(lang), App.Idb.getNormalizedWord(word)]);\n\t\t\t\tlet req = store.get([App.Idb.getNormalizedLang(lang), App.Idb.getNormalizedWord(word)]);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(this.getStructFromData(event.target.result));\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic getAllAsObject(lang, filters = {}) {\n\t\tHelper.Obj.replaceMembers({\n\t\t\tfrom: undefined,\n\t\t\tto: undefined\n\t\t}, filters);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet result = {};\n\t\t\tlet cnr = 0;\n\t\t\tApp.Idb.getDb().then((db) => {\n\t\t\t\tconst normalizedLang = App.Idb.getNormalizedLang(lang);\n\t\t\t\tlet store = db.transaction(['WordsStudy'], 'readonly').objectStore('WordsStudy');\n\t\t\t\tlet index = store.index('i-lang');\n\t\t\t\tconst key = IDBKeyRange.only([App.Idb.getNormalizedLang(lang)]);\n\t\t\t\tlet req = index.openCursor(key);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tlet cursor = req.result;\n\t\t\t\t\tif (!cursor) {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (Helper.isDefined(filters.from) && Helper.isDefined(filters.to)) {\n\t\t\t\t\t\tif (cnr >= filters.from && cnr <= filters.to) {\n\t\t\t\t\t\t\tresult[cursor.value.word] = cursor.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult[cursor.value.word] = cursor.value;\n\t\t\t\t\t}\n\t\t\t\t\t++cnr;\n\t\t\t\t\tcursor.continue()\n\t\t\t\t}\n\t\t\t}).catch((e) => {\n\t\t\t\tthrow e;\n\t\t\t});\n\t\t})\n\t}\n\n\t/**\n\t * Вставить или обновить слово.\n\t * @param lang\n\t * @param word\n\t * @param data - Данные структуры для обновления. Приме\n\t */\n\tstatic put(lang, word, data) {\n\t\tdata = data || {};\n\t\tlang = lang || data.lang;\n\t\tword = word || data.word;\n\t\tlet db, key;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (!Helper.isString(lang) || !Helper.isString(word)) {\n\t\t\t\tthrow new Error('lang не задан');\n\t\t\t}\n\t\t\tApp.Idb.getDb().then((resDb) => {\n\t\t\t\tdb = resDb;\n\t\t\t\treturn this.get(lang, word);\n\t\t\t}).then((existsStruct) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet newStruct = existsStruct;\n\t\t\t\t\tif (!newStruct) {\n\t\t\t\t\t\tnewStruct = this.getStruct();\n\t\t\t\t\t\tHelper.Obj.apply(newStruct, {\n\t\t\t\t\t\t\tlang: App.Idb.getNormalizedLang(lang),\n\t\t\t\t\t\t\tword: App.Idb.getNormalizedWord(word)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tHelper.Obj.apply(newStruct, data);\n\t\t\t\t\tlet transaction = db.transaction(['WordsStudy'], 'readwrite');\n\t\t\t\t\tlet store = transaction.objectStore('WordsStudy');\n\t\t\t\t\tlet req = store.put(newStruct);\n\t\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\t\tresolve(event.target.result);\n\t\t\t\t\t};\n\t\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\t\treject();\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).then((result) => {\n\t\t\t\tresolve(result);\n\t\t\t}).catch((e) => {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getForStudy(lang, count) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet result = [];\n\t\t\tApp.Idb.getDb().then((db) => {\n\t\t\t\tlet store = db.transaction(['WordsStudy'], 'readonly').objectStore('WordsStudy');\n\t\t\t\t/**\n\t\t\t\t * @type {IDBIndex}\n\t\t\t\t */\n\t\t\t\tlet index = store.index('i-lang-isStudy');\n\t\t\t\tconst key = IDBKeyRange.only([App.Idb.getNormalizedLang(lang), App.Idb.TRUE]);\n\t\t\t\tlet req = index.openCursor(key);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tlet cursor = req.result;\n\t\t\t\t\tif (!cursor) {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(cursor.value);\n\t\t\t\t\tif (result.length < count) {\n\t\t\t\t\t\tcursor.continue()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject('Не удалось получить слова по индексу.');\n\t\t\t\t};\n\t\t\t}).catch((e) => {\n\t\t\t\tHelper.Log.addDebug(e);\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getCountStudy(lang, isStudy) {\n\t\tconst normalizedLang = App.Idb.getNormalizedLang(lang);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tApp.Idb.getDb().then((db) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet store = db.transaction(['WordsStudy'], 'readonly').objectStore('WordsStudy');\n\t\t\t\t\t/**\n\t\t\t\t\t * @type {IDBIndex}\n\t\t\t\t\t */\n\t\t\t\t\tlet index = store.index('i-lang-isStudy');\n\t\t\t\t\tconst key = IDBKeyRange.only([normalizedLang, isStudy]);\n\t\t\t\t\tlet req = index.count(key);\n\t\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\t\treturn new Promise(() => {\n\t\t\t\t\t\t\tresolve(req.result);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\t\treject('Не удалось извлечь количество слов по индексу.');\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).then((result) => {\n\t\t\t\tresolve(result);\n\t\t\t}).catch((e) => {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getStat(lang) {\n\t\tlet result = {\n\t\t\tcntStudy: undefined,\n\t\t\tcntStudied: undefined\n\t\t};\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.getCountStudy(lang, App.Idb.TRUE).then((cnt) => {\n\t\t\t\tresult.cntStudy = cnt;\n\t\t\t\treturn this.getCountStudy(lang, App.Idb.FALSE);\n\t\t\t}).then((cnt) => {\n\t\t\t\tresult.cntStudied = cnt;\n\t\t\t\tresolve(result);\n\t\t\t}).catch((e) => {\n\t\t\t\tHelper.Log.addDebug(e);\n\t\t\t\treject(e);\n\t\t\t});\n\t\t})\n\t}\n\n\tstatic getCountForLang(lang) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tApp.Idb.getDb().then((db) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet store = db.transaction(['WordsStudy'], 'readonly').objectStore('WordsStudy');\n\t\t\t\t\t/**\n\t\t\t\t\t * @type {IDBIndex}\n\t\t\t\t\t */\n\t\t\t\t\tlet index = store.index('i-lang');\n\t\t\t\t\tconst key = IDBKeyRange.only([App.Idb.getNormalizedLang(lang)]);\n\t\t\t\t\tlet req = index.count(key);\n\t\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\t\tresolve(req.result);\n\t\t\t\t\t};\n\t\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\t\tHelper.Log.addDebug(event);\n\t\t\t\t\t\treject('Не удалось извлечь количество слов по индексу.');\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}).then((result) => {\n\t\t\t\tresolve(result);\n\t\t\t}).catch((e) => {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t}\n};","'use strict';\n\nconst stat = {\n\t/**\n\t * Структура, описывающая перевод слова.\n\t */\n\tStruct: {\n\t\t/**\n\t\t * Версия структуры на момент записи информации.\n\t\t * @type {Number}\n\t\t */\n\t\tversion: 1,\n\t\t/**\n\t\t * Для какого языка перевод слова (Напр. \"ENG\" или \"RUS\")\n\t\t * @type {String}\n\t\t */\n\t\tlangFrom: undefined,\n\t\t/**\n\t\t * На какой язык перевод слова (Напр. \"ENG\" или \"RUS\")\n\t\t * @type {String}\n\t\t */\n\t\tlangTo: undefined,\n\t\t/**\n\t\t * Нормализованный текст слова (Напр. \"dog\" или \"яблоко\")\n\t\t * @type {String}\n\t\t */\n\t\tword: undefined,\n\t\t/**\n\t\t * Нормализованный перевод слова (Напр. \"собака\" или \"apple\")\n\t\t * @type {String}\n\t\t */\n\t\ttranslate: undefined,\n\t\t/**\n\t\t * Частота употребления слова.\n\t\t * Дробное от 0 до 1. 1 = 100% означает, что слово имеет единствее значение.\n\t\t * @type {Number}\n\t\t */\n\t\tscore: undefined,\n\t\t/**\n\t\t * Время последней записи слова в таблицу (формат timestamp).\n\t\t * @type {Number}\n\t\t */\n\t\tinsertAt: 0\n\t}\n};\n/**\n * Объект, предоставляющий интерфейс к таблице \"Перевод слов\".\n * @type {Object}}\n */\nexport default class WordsTranslate {\n\n\tstatic getStruct() {\n\t\treturn Object.assign({}, stat.Struct);\n\t}\n\n\tstatic getStructFromData(data) {\n\t\tif (!document.Helper.isDefined(data)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet result = this.getStruct();\n\t\tresult = document.Helper.Obj.replaceMembers(result, data);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Возвращает структуру из БД.\n\t * @param langFrom\n\t * @param langTo\n\t * @param word\n\t */\n\tstatic get(langFrom, langTo, word) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn document.App.Idb.getDb().then((db) => {\n\t\t\t\tlet store = db.transaction(['WordsTranslate'], 'readonly').objectStore('WordsTranslate');\n\t\t\t\tlet index = store.index('i-langFrom-langTo-word');\n\t\t\t\tlet req = index.get([document.App.Idb.getNormalizedLang(langFrom), document.App.Idb.getNormalizedLang(langTo), document.App.Idb.getNormalizedWord(word)]);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(this.getStructFromData(event.target.result));\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t})\n\t\t});\n\t}\n\n\t/**\n\t * Вставить или обновить перевод слова.\n\t * @param langFrom\n\t * @param langTo\n\t * @param word\n\t * @param translate\n\t * @param score\n\t */\n\tstatic put(langFrom, langTo, word, translate, score) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdocument.App.Idb.getDb().then((db) => {\n\t\t\t\tlet struct = this.getStruct();\n\t\t\t\tdocument.Helper.Obj.apply(struct, {\n\t\t\t\t\tlangFrom: document.App.Idb.getNormalizedLang(langFrom),\n\t\t\t\t\tlangTo: document.App.Idb.getNormalizedLang(langTo),\n\t\t\t\t\tword: document.App.Idb.getNormalizedWord(word),\n\t\t\t\t\ttranslate: document.App.Idb.getNormalizedWord(translate),\n\t\t\t\t\tscore: score,\n\t\t\t\t\tinsertAt: Date.now()\n\t\t\t\t});\n\t\t\t\tlet transaction = db.transaction(['WordsTranslate'], 'readwrite');\n\t\t\t\tlet store = transaction.objectStore('WordsTranslate');\n\t\t\t\tlet req = store.put(struct);\n\t\t\t\treq.onsuccess = (event) => {\n\t\t\t\t\tresolve(event.target.result);\n\t\t\t\t};\n\t\t\t\treq.onerror = (event) => {\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t}).then((result) => {\n\t\t\t}).catch((e) => {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t}\n};\n","'use strict';\r\n\r\nimport Books from './Idb/Books'\r\nimport KeyVal from './Idb/KeyVal'\r\nimport WordsStudy from './Idb/WordsStudy'\r\nimport WordsTranslate from './Idb/WordsTranslate'\r\n\r\nconst stat = {\r\n\tTRUE: 1,\r\n\tFALSE: 0,\r\n\t/**\r\n\t *\r\n\t * @type {IDBDatabase}\r\n\t */\r\n\t_db: undefined\r\n};\r\n/**\r\n *\r\n * Адаптер БД приложения.\r\n * @type {Object}\r\n */\r\nexport default class Idb {\r\n\t/**-----------------------------------------------------------------------\r\n\t * Публикация субмодулей\r\n\t */\r\n\r\n\t/**\r\n\t *\r\n\t * @return {KeyVal}\r\n\t * @constructor\r\n\t */\r\n\tstatic get Books() {\r\n\t\treturn Books;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @return {KeyVal}\r\n\t * @constructor\r\n\t */\r\n\tstatic get KeyVal() {\r\n\t\treturn KeyVal;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @return {WordsStudy}\r\n\t * @constructor\r\n\t */\r\n\tstatic get WordsStudy() {\r\n\t\treturn WordsStudy;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @return {WordsTranslate}\r\n\t * @constructor\r\n\t */\r\n\tstatic get WordsTranslate() {\r\n\t\treturn WordsTranslate;\r\n\t}\r\n\r\n\t/**-----------------------------------------------------------------------\r\n\t * Публикация псевдостатических свойств\r\n\t */\r\n\r\n\tstatic get TRUE() {\r\n\t\treturn stat.TRUE;\r\n\t}\r\n\r\n\tstatic get FALSE() {\r\n\t\treturn stat.FALSE;\r\n\t}\r\n\r\n\t/**-----------------------------------------------------------------------\r\n\t * Реализация класса\r\n\t */\r\n\r\n\t/**\r\n\t * Возвращает булево значение, понимаемое IndexedDB.\r\n\t * @param boolValue\r\n\t * @return {*}\r\n\t */\r\n\tstatic getBool(boolValue) {\r\n\t\treturn boolValue ? this.TRUE : this.FALSE;\r\n\t}\r\n\r\n\t/**\r\n\t * @TODO: Сделать проверку на наличие свободного места для IndexedDB хранилища\r\n\t */\r\n\tstatic checkQuota() {\r\n\t\t// --------------------------------------------------\r\n\t\t// Google Chrome\r\n\t\t// @see: http://qaru.site/questions/200389/what-are-the-storage-limits-for-the-indexed-db-on-googles-chrome-browser/1092814#1092814\r\n\t\t// Request storage usage and capacity left\r\n\t\twindow.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.TEMPORARY,\r\n\t\t\t//the type can be either TEMPORARY or PERSISTENT\r\n\t\t\tfunction (used, remaining) {\r\n\t\t\t\tconsole.log(\"Used quota: \" + used + \", remaining quota: \" + remaining);\r\n\t\t\t}, function (e) {\r\n\t\t\t\tconsole.log('Error', e);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @return {Promise<any>}\r\n\t */\r\n\tstatic getDb() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t/**\r\n\t\t\t *  Кешировать нельзя т.к . после загрузки книги при первой же операции\r\n\t\t\t *  получаем ошибку\r\n\t\t\t *  в Google Chrome :\r\n\t\t\t *  \"DOMException: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.\"\r\n\t\t\t *  в Firefox\r\n\t\t\t *  \"InvalidStateError: A mutation operation was attempted on a database that did not allow mutations.\"\r\n\t\t\t *  @TODO: нагуглить объяснение этим ошибкам.\r\n\t\t\t * */\r\n\t\t\t// if (stat._db) {\r\n\t\t\t// \tresolve(stat._db);\r\n\t\t\t// } else {\r\n\t\t\tthis.open()\r\n\t\t\t\t.then((result) => {\r\n\t\t\t\t\tresolve(stat._db);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((result) => {\r\n\t\t\t\t\treject(result);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t})\r\n\t\t\t// }\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Promise}\r\n\t */\r\n\tstatic open() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (!window.indexedDB) {\r\n\t\t\t\twindow.indexedDB = window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\r\n\t\t\t}\r\n\t\t\t//IDBDatabase.onclose = this.onClose.bind(this);\r\n\t\t\t/**\r\n\t\t\t *\r\n\t\t\t * @type {IDBOpenDBRequest}\r\n\t\t\t */\r\n\t\t\tlet request = indexedDB.open('main', 2);\r\n\t\t\trequest.onblocked = function (event) {\r\n\t\t\t\t// If some other tab is loaded with the database, then it needs to be closed\r\n\t\t\t\t// before we can proceed.\r\n\t\t\t\talert(\"Пожалуйста закройте все другие вкладки, открытые на этом сайте!\");\r\n\t\t\t};\r\n\r\n\t\t\trequest.onupgradeneeded = this.onUpgradeNeeded.bind(this);\r\n\t\t\trequest.onsuccess = (event) => {\r\n\t\t\t\tstat._db = event.target.result;\r\n\t\t\t\tstat._db.onversionchange = this.onVersionChange.bind(this);\r\n\t\t\t\tstat._db.onclose = this.onClose.bind(this);\r\n\t\t\t\tresolve();\r\n\t\t\t};\r\n\t\t\trequest.onerror = (event) => {\r\n\t\t\t\tdocument.Helper.Log.addDebug('Ошибка! Проблема при открытии БД.');\r\n\t\t\t\talert('Ошибка! Не могу открыть БД.');\r\n\t\t\t\treject();\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tstatic onClose(e) {\r\n\t\tconsole.log('Idb/onClose', e);\r\n\t}\r\n\r\n\tstatic onUpgradeNeeded(event) {\r\n\t\tlet tmpObjStore;\r\n\t\tlet transaction = event.target.transaction;\r\n\t\t/**\r\n\t\t *\r\n\t\t * @type {IDBDatabase}\r\n\t\t */\r\n\t\tlet db = event.target.result;\r\n\r\n\t\tswitch (event.oldVersion) {\r\n\t\t\tcase 0 :\r\n\t\t\t\t//-------------------------------------------------------------\r\n\t\t\t\t// Таблица \"Хеш-таблица\"\r\n\t\t\t\ttmpObjStore = db.createObjectStore('KeyVal');\r\n\t\t\t\t//-------------------------------------------------------------\r\n\t\t\t\t// Таблица \"Сохраненные книги\"\r\n\t\t\t\ttmpObjStore = db.createObjectStore('Books', {\r\n\t\t\t\t\tkeyPath: 'hash',\r\n\t\t\t\t\tautoIncrement: false\r\n\t\t\t\t});\r\n\t\t\t\ttmpObjStore.createIndex('i-lang', 'lang');\r\n\t\t\t\t// tmpObjStore.createIndex('i-hash', 'hash', {\r\n\t\t\t\t// \tunique: true\r\n\t\t\t\t// });\r\n\t\t\t\ttmpObjStore.createIndex('i-title', 'title', {\r\n\t\t\t\t\tunique: false\r\n\t\t\t\t});\r\n\t\t\t\t//-------------------------------------------------------------\r\n\t\t\t\t// Таблица \"Изучаемые слова\"\r\n\t\t\t\ttmpObjStore = db.createObjectStore('WordsStudy', {\r\n\t\t\t\t\tkeyPath: ['lang', 'word'],\r\n\t\t\t\t\tautoIncrement: false\r\n\t\t\t\t});\r\n\t\t\t\ttmpObjStore = transaction.objectStore('WordsStudy');\r\n\t\t\t\ttmpObjStore.createIndex('i-lang', ['lang'],);\r\n\t\t\t\t// tmpObjStore.createIndex('i-lang-word', ['lang', 'word'], {\r\n\t\t\t\t// \tunique: true\r\n\t\t\t\t// });\r\n\t\t\t\ttmpObjStore.createIndex('i-lang-isStudy', ['lang', 'isStudy'], {\r\n\t\t\t\t\tunique: false\r\n\t\t\t\t});\r\n\t\t\t//-------------------------------------------------------------\r\n\t\t\t// goto next\r\n\t\t\tcase 1 :\r\n\t\t\t\t//-------------------------------------------------------------\r\n\t\t\t\t// Таблица \"Переводы слов\"\r\n\t\t\t\ttmpObjStore = db.createObjectStore('WordsTranslate', {\r\n\t\t\t\t\tkeyPath: ['langFrom', 'langTo', 'word'],\r\n\t\t\t\t\tautoIncrement: false\r\n\t\t\t\t});\r\n\t\t\t\t// Поиск всех слов по языку\r\n\t\t\t\ttmpObjStore.createIndex('i-langFrom', ['langFrom'],);\r\n\t\t\t\t// Поиск всех переводов с основного языка на дополнительный\r\n\t\t\t\ttmpObjStore.createIndex('i-langFrom-langTo', ['langFrom', 'langTo']);\r\n\t\t\t\t// Поиск перевода для конкретного слова\r\n\t\t\t\ttmpObjStore.createIndex('i-langFrom-langTo-word', ['langFrom', 'langTo', 'word'], {\r\n\t\t\t\t\tunique: true\r\n\t\t\t\t});\r\n\t\t\t//-------------------------------------------------------------\r\n\t\t\t// goto next\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Пример проверки индексов\r\n\t\tif (false) {\r\n\t\t\tif (!db.objectStoreNames.contains('Books')) {\r\n\t\t\t\ttmpObjStore = db.createObjectStore('Books');\r\n\t\t\t}\r\n\t\t\ttmpObjStore = transaction.objectStore('Books');\r\n\t\t\tif (!tmpObjStore.indexNames.contains('i-title')) {\r\n\t\t\t\ttmpObjStore.createIndex('i-title', 'title', {\r\n\t\t\t\t\tunique: false\r\n\t\t\t\t});\r\n\t\t\t} else if (tmpObjStore.index('i-title').unique) {\r\n\t\t\t\ttmpObjStore.deleteIndex('i-title');\r\n\t\t\t\ttmpObjStore.createIndex('i-title', 'title', {\r\n\t\t\t\t\tunique: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @TODO: Использовать защиту от обновления в соседних вкладках\r\n\t * @see: (https://developer.mozilla.org/ru/docs/IndexedDB/Using_IndexedDB) Version changes while a web app is open in another tab\r\n\t */\r\n\tstatic onVersionChange() {\r\n\t\tstat._db.close();\r\n\t\talert(\"Обновленние БД завершено. Пожалуйста обноите страницу!\");\r\n\t}\r\n\r\n\tstatic getNormalizedLang(lang) {\r\n\t\treturn lang.toUpperCase();\r\n\t}\r\n\r\n\t/**\r\n\t * Возвращает нормализованное значение слова.\r\n\t * Т.е. в этом регистре храним слова, в этом регистре ищем по базе.\r\n\t * @param word\r\n\t * @return {string}\r\n\t */\r\n\tstatic getNormalizedWord(word) {\r\n\t\treturn word.toLowerCase();\r\n\t}\r\n};\r\n","'use strict';\nimport Library from '../Library';\n\nimport ErrorUser from '../../Errors/User';\nimport Menu from '../Menu';\nimport Idb from '../../Idb';\n\n/**\n * Контейнер для псевдостатических свойств.\n * @type {Object}\n */\nconst stat = {\n\t/**\n\t * DOM-элемент - контейтер для списка книг\n\t */\n\telContainer: undefined,\n\t/**\n\t * DOM-элемент - список книг\n\t */\n\tel: undefined,\n\t/**\n\t * DOM-элемент - шаблон для одной книги в библиотеке.\n\t */\n\telTplItem: undefined,\n\t/**\n\t * JS-объект - меню для книги, по которой кликнули.\n\t */\n\tbookMenu: undefined,\n\t/**\n\t * @type {Array}\n\t * @see document.App.Idb.Books.Struct\n\t *\n\t */\n\tbooks: []\n};\n/**\n * Компонент, позволяющий выбрать книгу из БД.\n */\nexport default class BooksList {\n\tstatic init() {\n\t\tstat.elContainer = Library.getEl().querySelector('.library-books-container');\n\t\tstat.el = Library.getEl().querySelector('.library-books-list');\n\t\tstat.el.addEventListener('click', this.onListClick.bind(this));\n\t\tstat.elTplItem = stat.el.querySelector('.tpl.library-books-item');\n\t\tstat.elTplItem.classList.remove('tpl');\n\t\tstat.bookMenu = new Menu(stat.elContainer.querySelector('.library-book-menu'), this.onBookMenuClick.bind(this));\n\t}\n\n\tstatic _load() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tstat.books = [];\n\t\t\tdocument.App.Idb.Books.getAll({\n\t\t\t\tfilter: {\n\t\t\t\t\tlang: document.App.langStudy\n\t\t\t\t}\n\t\t\t}).then((books) => {\n\t\t\t\tstat.books = books;\n\t\t\t\tresolve();\n\t\t\t}).catch((e) => {\n\t\t\t\treject(new ErrorUser(document.App.localize('Не удалось загрузить список книг из БД')));\n\t\t\t})\n\t\t});\n\t}\n\n\tstatic display() {\n\t\tthis.clean();\n\t\tstat.books.forEach((book) => {\n\t\t\tlet newItem = stat.elTplItem.cloneNode(true);\n\t\t\tnewItem.querySelector('.library-books-hash').innerHTML = book.hash;\n\t\t\tnewItem.querySelector('.library-books-lang-value').innerHTML = book.lang;\n\t\t\tnewItem.querySelector('.library-books-title').innerHTML = book.title.concat('<br>');\n\t\t\tlet img = book.image;\n\t\t\tif (img) {\n\t\t\t\tnewItem.querySelector('.library-books-image img').src = 'data:image/;base64,' + img;\n\t\t\t}\n\t\t\tstat.el.appendChild(newItem);\n\t\t});\n\t}\n\n\tstatic clean() {\n\t\tlet elList = stat.el.querySelectorAll('.library-books-item');\n\t\telList.forEach((el) => {\n\t\t\tstat.el.removeChild(el);\n\t\t})\n\t}\n\n\tstatic loadAndDisplay() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._load().then(() => {\n\t\t\t\tthis.display();\n\t\t\t\tresolve();\n\t\t\t}).catch((e) => {\n\t\t\t\treject();\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic onListClick(event) {\n\t\tlet itemEl = event.target.closest('.library-books-item');\n\t\tif (!itemEl) {\n\t\t\treturn;\n\t\t}\n\t\tstat.bookMenu.setContext(itemEl).showAt(event.clientX, event.clientY);\n\t}\n\n\t/**\n\t * Отправляет книгу в раздел \"Чтение\".\n\t * @param itemEl\n\t */\n\tstatic bookRead(itemEl) {\n\t\titemEl.classList.add('active');\n\t\tsetTimeout(() => {\n\t\t\titemEl.classList.remove('active');\n\t\t}, 2000);\n\t\tdocument.App.bookToReadByHash(itemEl.querySelector('.library-books-hash').innerHTML).then(() => {\n\t\t\tdocument.App.Component.Nav.go2section('read');\n\t\t}).catch((e) => {\n\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\ttitle: document.App.localize('Уведомление.'),\n\t\t\t\tmessage: (e instanceof ErrorUser) ? e.message : document.App.localize('Ошибка при попытке загрузить книгу из библиотеки')\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Удадяет книгу.\n\t * @param itemEl\n\t */\n\tstatic bookDelete(itemEl) {\n\t\tconst bookHash = itemEl.querySelector('.library-books-hash').innerHTML;\n\t\tdocument.App.Component.Loadmask.show(document.App.localize('Удаление...'));\n\t\tIdb.Books.delete(bookHash).then(() => {\n\t\t\tdocument.App.Component.Loadmask.hide();\n\t\t\tthis.loadAndDisplay();\n\t\t}).catch(() => {\n\t\t\tdocument.App.Component.Loadmask.hide();\n\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\ttitle: document.App.localize('Ошибка.'),\n\t\t\t\tmessage: (e instanceof ErrorUser) ? e.message : document.App.localize('Не удалось удалить книгу из библиотеки')\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param {DomElement} menuItem - Пункт меню, по которому кликнули.\n\t * @param {String} menuItemAction - Идентификатор действия\n\t * @param {DomElement} context - Элемент, на котором вызвано меню (т.е. книга)\n\t */\n\tstatic onBookMenuClick(menuItem, menuItemAction, context) {\n\t\tswitch (menuItemAction) {\n\t\t\tcase 'read' :\n\t\t\t\tthis.bookRead(context);\n\t\t\t\tbreak;\n\t\t\tcase 'delete' :\n\t\t\t\tthis.bookDelete(context);\n\t\t\t\tbreak;\n\t\t}\n\t}\n};","'use strict';\n\nimport Library from '../Library';\nimport ErrorUser from '../../Errors/User'\n\nlet elInput = undefined;\n\n/**\n * Компонент, позволяющий выбрать файл для чтения с диска.\n */\nexport default class LoadFromFile {\n\tstatic init() {\n\t\telInput = Library.getEl().querySelector('input[name=\"inpFile\"]');\n\t\tdocument.querySelector('.library-loadfromfile-button').addEventListener('click', this.onInputButtonClick.bind(this));\n\t\telInput.addEventListener('change', this.onInputFileChange.bind(this));\n\t}\n\n\tstatic onInputButtonClick() {\n\t\telInput.click();\n\t}\n\n\tstatic onInputFileChange(event) {\n\t\tdocument.App.Component.Loadmask.show(document.App.localize('Загрузка файла...'));\n\t\tdocument.Helper.Io.loadTextFromInputFile(event.srcElement).then((text) => {\n\t\t\tevent.srcElement.value = null;\n\t\t\tdocument.App.Component.Loadmask.hide();\n\t\t\tdocument.App.bookToRead(text, true).then(() => {\n\t\t\t\tdocument.App.Component.Nav.go2section('read');\n\t\t\t}).catch((e) => {\n\t\t\t\tdocument.App.Component.Loadmask.hide();\n\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\ttitle: document.App.localize('Уведомление.'),\n\t\t\t\t\tmessage: (e instanceof ErrorUser) ? e.message : document.App.localize('Ошибка при обработке книги')\n\t\t\t\t});\n\t\t\t});\n\t\t\tdocument.App.Component.Library.isDisplayed = false;\n\t\t}).catch((e) => {\n\t\t\tdocument.App.Component.Loadmask.hide();\n\t\t\tdocument.Helper.Log.addDebug(e);\n\t\t});\n\t}\n};","'use strict';\nimport BooksList from './Library/BooksList'\nimport LoadFromFile from './Library/LoadFromFile'\n\nimport './Library.css';\n\n\nlet el = undefined;\nlet isDisplayed = false;\n\n/**\n * Компонент \"Библиотека\".\n * Объединяет субкомпоненты для работы с библиотекой книг.\n */\nexport default class Library {\n\tstatic getEl() {\n\t\treturn el;\n\t}\n\n\tstatic init() {\n\t\tel = document.getElementById('library');\n\t\tBooksList.init();\n\t\tLoadFromFile.init();\n\t}\n\n\tstatic display() {\n\t\tif (isDisplayed) {\n//\t\t\treturn;\n\t\t}\n\t\tBooksList.loadAndDisplay().catch((e) => {\n\t\t\tdocument.Helper.Log.addDebug(e);\n\t\t});\n\t\tisDisplayed = true;\n\t}\n};","'use strict';\r\n\r\nimport './WinWordActions.css';\r\n\r\n\r\nconst stat = {\r\n\t/**\r\n\t * @type {DomElement} #win-word-actions\r\n\t */\r\n\tel : undefined\r\n};\r\n\r\n/**\r\n * Компонент \"Выбор действия над указанным словом\".\r\n */\r\nexport default class WinWordActions {\r\n\tstatic init() {\r\n\t\tstat.el = document.getElementById('win-word-actions');\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param options\r\n\t * @param options.onCancel\r\n\t * @param options.onStudied\r\n\t * @param options.onStudy\r\n\t * @param options.onAnswerWrong\r\n\t * @return { document.App.Component.WinWordCard}\r\n\t */\r\n\tstatic show(options) {\r\n\t\tif (!document.Helper.isObject(options)) {\r\n\t\t\tthis.throwError('show/Параметры не переданы');\r\n\t\t} else if (!document.Helper.isFunction(options.onStudied)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"onStudied\"');\r\n\t\t} else if (!document.Helper.isFunction(options.onStudy)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"onStudy\"');\r\n\t\t} else if (!document.Helper.isString(options.word)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"word\"');\r\n\t\t} else if (!document.Helper.isString(options.translate)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"translate\"');\r\n\t\t}\r\n\t\t// else if (!document.Helper.isFunction(options.onCancel)) {\r\n\t\t// \tthis.throwError('show/Не передан параметр \"onCancel\"');\r\n\t\t// }\r\n\t\tstat.el.querySelector('.word').innerHTML = options.word;\r\n\t\tstat.el.querySelector('.translate').innerHTML = options.translate;\r\n\r\n\r\n\t\tstat.el.onclick = (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tif (event.target.classList.contains('btn-cancel')) {\r\n\t\t\t\t(options.onCancel || document.Helper.emptyFn)();\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else if (event.target.classList.contains('btn-studied')) {\r\n\t\t\t\toptions.onStudied();\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else if (event.target.classList.contains('btn-study')) {\r\n\t\t\t\toptions.onStudy();\r\n\t\t\t\tthis.hide();\r\n\t\t\t}\r\n\t\t};\r\n\t\tstat.el.classList.remove('hidden');\r\n\t\t//document.querySelector('#modal-background').classList.remove('hidden');\r\n\t\treturn this;\r\n\t}\r\n\r\n\tstatic hide() {\r\n\t\tstat.el.classList.add('hidden');\r\n\t\t// document.querySelector('#modal-background').classList.add('hidden');\r\n\t\treturn this;\r\n\t}\r\n\r\n\tstatic throwError(text) {\r\n\t\tthrow new Error('WinWordActions/' + text);\r\n\t}\r\n};","'use strict';\r\n\r\nimport './Read.css';\r\n\r\nimport WinWordActions from './WinWordActions';\r\n\r\n/**\r\n * Псевдостатические свойства.\r\n * @type {Object}\r\n */\r\nconst stat = {\r\n\t/**\r\n\t * @see: HTML element '#read'\r\n\t */\r\n\tel : undefined\r\n};\r\n\r\n/**\r\n * Раздел секции \"Чтение\".\r\n */\r\nexport default class Read {\r\n\tstatic init() {\r\n\t\tstat.el = document.getElementById('read');\r\n\t\tstat.el.addEventListener('click', this.onTextClick.bind(this));\r\n\t\tWinWordActions.init();\r\n\t}\r\n\tstatic displayBook(book) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet elText = stat.el;\r\n\t\t\tlet wordsStudy = {};\r\n\t\t\t document.App.Idb.WordsStudy.getAllAsObject( document.App.langStudy).then((resWords) => {\r\n\t\t\t\twordsStudy = resWords;\r\n\t\t\t\tparseBook();\r\n\t\t\t}).catch(() => {\r\n\t\t\t\tparseBook();\r\n\t\t\t});\r\n\r\n\t\t\tlet parseBook = () => {\r\n\t\t\t\telText.innerHTML = '';\r\n\t\t\t\tbook.sections.forEach((section) => {\r\n\t\t\t\t\tlet containerTitle = document.createElement('h2');\r\n\t\t\t\t\tcontainerTitle.classList.add('read-text-title');\r\n\t\t\t\t\tsection.title.forEach((titleLine) => {\r\n\t\t\t\t\t\tlet elLine = document.createElement('p');\r\n\t\t\t\t\t\telLine.classList.add('read-text-title-item');\r\n\t\t\t\t\t\tlet words = document.Helper.Text.getWords( document.App.langStudy, titleLine);\r\n\t\t\t\t\t\twords.forEach((word) => {\r\n\t\t\t\t\t\t\tlet newElWord = document.createElement('span');\r\n\t\t\t\t\t\t\tnewElWord.innerHTML = word;\r\n\t\t\t\t\t\t\tlet hash = document.App.getWordHash(word);\r\n\t\t\t\t\t\t\tnewElWord.classList.add('read-word');\r\n\t\t\t\t\t\t\tnewElWord.classList.add('word-hash-' + hash);\r\n\t\t\t\t\t\t\tlet normalizedWord = document.App.Idb.getNormalizedWord(word);\r\n\t\t\t\t\t\t\tif (normalizedWord in wordsStudy) {\r\n\t\t\t\t\t\t\t\tif (wordsStudy[normalizedWord].isStudy) {\r\n\t\t\t\t\t\t\t\t\tthis.wordElMark(newElWord, document.App.WORD_STATE.WORD_STATE_STUDY);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.wordElMark(newElWord, document.App.WORD_STATE.WORD_STATE_STUDYED);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.wordElMark(newElWord, document.App.WORD_STATE.WORD_STATE_UNKNOWN);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telLine.appendChild(newElWord);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcontainerTitle.appendChild(elLine);\r\n\t\t\t\t\t});\r\n\t\t\t\t\telText.appendChild(containerTitle);\r\n\r\n\t\t\t\t\tlet containerSubtext = document.createElement('p');\r\n\t\t\t\t\tcontainerSubtext.classList.add('read-text-line');\r\n\t\t\t\t\tsection.p.forEach((textLine) => {\r\n\t\t\t\t\t\tlet elLine = document.createElement('p');\r\n\t\t\t\t\t\telLine.classList.add('read-text-line');\r\n\t\t\t\t\t\tlet words = document.Helper.Text.getWords( document.App.langStudy, textLine);\r\n\t\t\t\t\t\twords.forEach((word) => {\r\n\t\t\t\t\t\t\tlet newElWord = document.createElement('span');\r\n\t\t\t\t\t\t\tnewElWord.innerHTML = word;\r\n\t\t\t\t\t\t\tlet hash = document.App.getWordHash(word);\r\n\t\t\t\t\t\t\tnewElWord.classList.add('read-word');\r\n\t\t\t\t\t\t\tnewElWord.classList.add('word-hash-' + hash);\r\n\t\t\t\t\t\t\tlet normalizedWord = document.App.Idb.getNormalizedWord(word);\r\n\t\t\t\t\t\t\tif (normalizedWord in wordsStudy) {\r\n\t\t\t\t\t\t\t\tif (wordsStudy[normalizedWord].isStudy) {\r\n\t\t\t\t\t\t\t\t\tthis.wordElMark(newElWord, document.App.WORD_STATE.WORD_STATE_STUDY);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.wordElMark(newElWord, document.App.WORD_STATE.WORD_STATE_STUDYED);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.wordElMark(newElWord, document.App.WORD_STATE.WORD_STATE_UNKNOWN);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\telLine.appendChild(newElWord);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcontainerSubtext.appendChild(elLine);\r\n\t\t\t\t\t});\r\n\t\t\t\t\telText.appendChild(containerSubtext);\r\n\t\t\t\t});\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {DomEvent} e\r\n\t * @constructor\r\n\t */\r\n\tstatic onTextClick(e) {\r\n\t\tif (!e.target.classList.contains('read-word')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet word = e.target.innerHTML;\r\n\t\t document.App.Component.Loadmask.show( document.App.localize('Загрузка перевода...'));\r\n\t\t document.App.getWordTranslate(word).then((translate) => {\r\n\t\t\t document.App.Component.Loadmask.hide();\r\n\t\t\tWinWordActions.show({\r\n\t\t\t\tword: word,\r\n\t\t\t\ttranslate: translate,\r\n\t\t\t\tonStudy :()=>{\r\n\t\t\t\t\t document.App.wordStudyAdd(word);\r\n\t\t\t\t\tthis.wordsMark(word, document.App.WORD_STATE.WORD_STATE_STUDY);\r\n\t\t\t\t},\r\n\t\t\t\tonStudied : ()=>{\r\n\t\t\t\t\t document.App.WordStudyedAdd(word);\r\n\t\t\t\t\tthis.wordsMark(word, document.App.WORD_STATE.WORD_STATE_STUDYED);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}).catch((e) => {\r\n\t\t\telDialog.querySelector('.translate').innerHTML = '???';\r\n\t\t\tdocument.Helper.Log.addDebug(e);\r\n\t\t\telDialog.classList.add('hidden');\r\n\t\t\t document.App.Component.WinMsg.show({\r\n\t\t\t\ttitle: document.App.localize('Ошибка!'),\r\n\t\t\t\tmessage: e instanceof Error ? e.message : document.App.localize('Не удалось получить перевод слова')\r\n\t\t\t});\r\n\t\t\t document.App.Component.Loadmask.hide();\r\n\t\t});\r\n\r\n\t\tlet elDialog = document.getElementById('win-word-actions');\r\n\t\telDialog.classList.add('hidden');\r\n\t\telDialog.querySelector('.word').innerHTML = e.target.innerHTML;\r\n\t\telDialog.querySelector('.translate').innerHTML = '...';\r\n\t\telDialog.classList.remove('hidden');\r\n\r\n\t}\r\n\r\n\tstatic wordElMark(elWord, state) {\r\n\t\telWord.classList.remove('read-word-unknown');\r\n\t\telWord.classList.remove('read-word-study');\r\n\t\telWord.classList.remove('read-word-studied');\r\n\t\tswitch (state) {\r\n\t\t\tcase document.App.WORD_STATE.WORD_STATE_STUDY:\r\n\t\t\t\telWord.classList.add('read-word-study');\r\n\t\t\t\tbreak;\r\n\t\t\tcase document.App.WORD_STATE.WORD_STATE_STUDYED:\r\n\t\t\t\telWord.classList.add('read-word-studied');\r\n\t\t\t\tbreak;\r\n\t\t\tcase document.App.WORD_STATE.WORD_STATE_UNKNOWN:\r\n\t\t\t\telWord.classList.add('read-word-unknown');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic wordsMark(words, state) {\r\n\t\tif (!document.Helper.isArray(words)) {\r\n\t\t\twords = [words];\r\n\t\t}\r\n\t\twords.forEach((word) => {\r\n\t\t\tlet classWordHash = 'word-hash-' + document.App.getWordHash(word);\r\n\t\t\tlet words = stat.el.querySelectorAll('.' + classWordHash);\r\n\t\t\twords.forEach((elWord) => {\r\n\t\t\t\tthis.wordElMark(elWord, state);\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n};\r\n","'use strict';\r\n\r\nimport './Grid.css';\r\n\r\n/**\r\n * Псевдостатические свойства.\r\n * @type {Object}\r\n */\r\nconst stat = {\r\n\telTbody: undefined,\r\n\telTplTr: undefined,\r\n\trowStruct: {\r\n\t\tword: undefined,\r\n\t\ttranslate: undefined,\r\n\t\tisStudy: undefined\r\n\t},\r\n\t/**\r\n\t * Слова, на текущей странице таблицы\r\n\t */\r\n\trows: [],\r\n\t/**\r\n\t * Количество слов, отображаемое на странице за раз\r\n\t */\r\n\tcountPerPage: 15,\r\n\tcurrentPage: 1,\r\n\ttotalPages: 0,\r\n\telGrid: undefined\r\n};\r\n/**\r\n * Компонент \"Таблица слов\"\r\n **/\r\nexport default class Grid {\r\n\tstatic init(elGrid) {\r\n\t\tstat.elGrid = elGrid;\r\n\t\tstat.elGrid.querySelector('.study-bbar-btn-next').addEventListener('click', this.onBbarBtnNextClick.bind(this));\r\n\t\tstat.elGrid.querySelector('.study-bbar-btn-prev').addEventListener('click', this.onBbarBtnPrevClick.bind(this));\r\n\t\tstat.elGrid.querySelector('.study-bbar-gotopage-button').addEventListener('click', this.onBbarBtnGotopageClick.bind(this));\r\n\t\tstat.elTbody = stat.elGrid.querySelector('table>tbody');\r\n\t\tstat.elTplTr = stat.elTbody.querySelector('tr.tpl');\r\n\t\tstat.elTplTr.classList.remove('tpl');\r\n\t}\r\n\r\n\tstatic _loadData() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tdocument.App.Idb.WordsStudy.getCountForLang(document.App.langStudy).then((result) => {\r\n\t\t\t\tstat.totalPages = Math.ceil(result / stat.countPerPage);\r\n\t\t\t}).then(() => {\r\n\t\t\t\treturn this._loadDataTable();\r\n\t\t\t}).then(() => {\r\n\t\t\t\tresolve();\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tstatic onBbarBtnNextClick(e) {\r\n\t\tif (stat.currentPage >= stat.totalPages) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t++stat.currentPage;\r\n\t\tthis._loadDataTable().then(() => {\r\n\t\t\tthis.display();\r\n\t\t});\r\n\t}\r\n\r\n\tstatic _loadDataTable() {\r\n\t\tstat.rows = [];\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tdocument.App.Idb.WordsStudy.getAllAsObject(document.App.langStudy, {\r\n\t\t\t\tfrom: (stat.currentPage - 1) * stat.countPerPage,\r\n\t\t\t\tto: stat.currentPage * stat.countPerPage - 1\r\n\t\t\t}).then((words) => {\r\n\t\t\t\tlet wordsList = [];\r\n\t\t\t\tfor (let word in words) {\r\n\t\t\t\t\twordsList.push(word);\r\n\t\t\t\t\tlet newRow = Object.assign({}, stat.rowStruct);\r\n\t\t\t\t\tnewRow.word = word;\r\n\t\t\t\t\tnewRow.isStudy = words[word].isStudy;\r\n\t\t\t\t\tstat.rows.push(newRow);\r\n\t\t\t\t}\r\n\t\t\t\treturn document.App.getWordsTranslate(wordsList);\r\n\t\t\t}).then((translates) => {\r\n\t\t\t\ttranslates.forEach((translateStruct) => {\r\n\t\t\t\t\tlet rowRef = document.Helper.Obj.getObjectFromArray(stat.rows, 'word', translateStruct.word);\r\n\t\t\t\t\trowRef.translate = translateStruct.translate;\r\n\t\t\t\t});\r\n\t\t\t\tresolve();\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tdocument.Helper.Log.addDebug(e);\r\n\t\t\t\treject(e);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tstatic onBbarBtnPrevClick(e) {\r\n\t\tif (stat.currentPage <= 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t--stat.currentPage;\r\n\t\tthis._loadDataTable().then(() => {\r\n\t\t\tthis.display();\r\n\t\t});\r\n\t}\r\n\r\n\tstatic onBbarBtnGotopageClick(e) {\r\n\t\tlet pageIndex = stat.elGrid.querySelector('.study-bbar-gotopage-value').value;\r\n\t\tpageIndex = parseInt(pageIndex);\r\n\t\tif (!document.Helper.isNumber(pageIndex) || pageIndex < 1 || pageIndex > stat.totalPages) {\r\n\t\t\tdocument.App.Component.WinMsg.show({\r\n\t\t\t\ttitle: document.App.localize('Уведомление'),\r\n\t\t\t\tmessage: document.App.localize('Номер страницы вне допустимого диапазона')\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet lastPage = stat.currentPage;\r\n\t\tstat.currentPage = pageIndex;\r\n\t\tthis.reload().then(() => {\r\n\t\t\tthis.display();\r\n\t\t}).catch(() => {\r\n\t\t\tstat.currentPage = lastPage;\r\n\t\t})\r\n\t}\r\n\r\n\tstatic reload() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._loadData().then(() => {\r\n\t\t\t\tthis.display();\r\n\t\t\t\tresolve();\r\n\t\t\t}).catch(() => {\r\n\t\t\t\treject();\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tstatic display() {\r\n\t\tstat.elGrid.querySelector('.study-bbar-page-value').innerHTML = stat.currentPage;\r\n\t\tstat.elGrid.querySelector('.study-bbar-page-total-value').innerHTML = stat.totalPages;\r\n\t\tstat.elTbody.innerHTML = '';\r\n\t\tlet addRow = (row) => {\r\n\t\t\tlet elTr = stat.elTplTr.cloneNode(true);\r\n\t\t\telTr.classList.remove('tpl');\r\n\t\t\telTr.querySelector('.study-td-index').innerHTML = (stat.currentPage - 1) * stat.countPerPage + cnrWord + 1;\r\n\t\t\tif (!document.Helper.isObject(row)) {\r\n\t\t\t\telTr.classList.add('empty');\r\n\t\t\t} else {\r\n\t\t\t\telTr.querySelector('.study-td-word').innerHTML = row.word;\r\n\t\t\t\telTr.querySelector('.study-td-translate').innerHTML = row.translate;\r\n\t\t\t\tlet elIsStudy = elTr.querySelector('.study-td-is-study>i');\r\n\t\t\t\tif (row.isStudy === document.App.Idb.TRUE) {\r\n\t\t\t\t\telIsStudy.classList.add('fas');\r\n\t\t\t\t\telIsStudy.classList.add('fa-plus-circle');\r\n\t\t\t\t\telIsStudy.classList.add('is-study-true');\r\n\t\t\t\t} else {\r\n\t\t\t\t\telIsStudy.classList.add('fas');\r\n\t\t\t\t\telIsStudy.classList.add('fa-minus-circle');\r\n\t\t\t\t\telIsStudy.classList.add('is-study-false');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstat.elTbody.appendChild(elTr);\r\n\t\t};\r\n\t\tlet cnrWord = 0;\r\n\t\tstat.rows.forEach((row) => {\r\n\t\t\taddRow(row);\r\n\t\t\t++cnrWord;\r\n\t\t});\r\n\t\tfor (; cnrWord < stat.countPerPage; ++cnrWord) {\r\n\t\t\taddRow();\r\n\t\t}\r\n\t}\r\n};\r\n","'use strict';\r\nimport User from '../User'\r\n\r\nexport default class PressCancel extends User {\r\n};","'use strict';\n\nimport './Study.css'\n\nimport Grid from './Study/Grid'\nimport ErrorUser from '../Errors/User';\nimport ErrorUserPressCancel from '../Errors/User/PressCancel'\n\nconst stat = {\n\t/**\n\t * @var {Array} of @see:  { document.App.Idb.WordsTranslate.Struct}\n\t */\n\twordsTranslate: [],\n\t/**\n\t * Изучаемые сейчас слова.\n\t * @var {Array} of @see: { document.App.Idb.WordsStudy.Struct}\n\t */\n\twordsStudy: [],\n\twordsStudyProgress: {\n\t\ttplItem: {\n\t\t\tisMemorized: false,\n\t\t\tcntCorrect: 0,\n\t\t\tcntWrong: 0\n\t\t},\n\t\talgLang1ToLang2: [],\n\t\talgLang2ToLang1: []\n\t},\n\n\tdefaults: {\n\t\t/**\n\t\t * Количество слов для изучения за один заход.\n\t\t */\n\t\tcntWordForStudy: 6,\n\t\t/**\n\t\t * Количество правильных ответов для прохождения теста.\n\t\t */\n\t\tcntCorrectForPass: 3\n\t},\n\t/**\n\t * @see: DomElement '#study'\n\t */\n\telStudy: undefined\n};\n\n/**\n * Раздел для переменных секции \"Изучение слов\"\n */\nexport default class Study {\n\tstatic init() {\n\t\tstat.elStudy = document.getElementById('study');\n\t\tstat.elStudy.querySelector('.study-panel-start').querySelector('input[name=\"cntToStudy\"]').value = stat.defaults.cntWordForStudy;\n\t\tstat.elStudy.querySelector('.study-button-start').addEventListener('click', this.onButtonStartClick.bind(this));\n\t\tGrid.init(stat.elStudy.querySelector('.study-words-grid'));\n\t}\n\n\tstatic display() {\n\t\tGrid.reload().catch((e)=>{\n\t\t\tdocument.Helper.Log.addDebug(e);\n\t\t});\n\t}\n\n\tstatic onButtonStartClick(e) {\n\t\tlet cntToStudy = stat.elStudy.querySelector('.study-panel-start').querySelector('input[name=\"cntToStudy\"]').value;\n\t\tcntToStudy = parseInt(cntToStudy);\n\t\tif (!document.Helper.isNumber(cntToStudy) || cntToStudy < 1) {\n\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\ttitle: document.App.localize('Уведомление.'),\n\t\t\t\tmessage: document.App.localize('Недостаточно слов для изучения')\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tdocument.App.Component.Loadmask.show(document.App.localize('Получение списка слов для изучения...'));\n\t\tdocument.App.Idb.WordsStudy.getForStudy(document.App.langStudy, cntToStudy).then((wordsForStudy) => {\n\t\t\tdocument.App.Component.Loadmask.hide();\n\t\t\tif (wordsForStudy.length < 1) {\n\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\ttitle: document.App.localize('Уведомление.'),\n\t\t\t\t\tmessage: document.App.localize('Недостаточно слов для изучения.<br>Следует добавить слова в разделе \"Чтение\"')\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstat.wordsStudy = wordsForStudy;\n\t\t\tlet wordsForTranslate = [];\n\t\t\tstat.wordsStudy.forEach((wordStruct) => {\n\t\t\t\twordsForTranslate.push(wordStruct.word);\n\t\t\t});\n\t\t\tdocument.App.getWordsTranslate(wordsForTranslate).then((translateStructArray) => {\n\t\t\t\tstat.wordsTranslate = translateStructArray;\n\t\t\t\tthis.doStudy();\n\t\t\t});\n\t\t}).catch((e) => {\n\t\t\tdocument.Helper.Log.addDebug(e);\n\t\t})\n\t}\n\n\t/**\n\t * Очищает прогресс и заполняет его пустыми структурами.\n\t */\n\tstatic clearProgress() {\n\t\tstat.wordsStudyProgress.algLang1ToLang2 = [];\n\t\tstat.wordsStudyProgress.algLang2ToLang1 = [];\n\t\tstat.wordsStudy.forEach((wordStruct, index) => {\n\t\t\tstat.wordsStudyProgress.algLang1ToLang2[index] = Object.assign({}, stat.wordsStudyProgress.tplItem);\n\t\t\tstat.wordsStudyProgress.algLang2ToLang1[index] = Object.assign({}, stat.wordsStudyProgress.tplItem);\n\t\t});\n\t}\n\n\t/**\n\t * Начать процесс изучения слов.\n\t */\n\tstatic doStudy() {\n\t\tthis.clearProgress();\n\t\tthis.doStudyLang1ToLang2()\n\t\t\t.then(() => {\n\t\t\t\treturn this.updateIdbWordStudy();\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.doStudyLang2ToLang1();\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.updateIdbWordStudy();\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tdocument.App.Component.WinWordCard.hide();\n\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\ttitle: document.App.localize('Уведомление.'),\n\t\t\t\t\tmessage: document.App.localize('Все слова изучены')\n\t\t\t\t});\n\t\t\t\tdocument.App.Component.Statistic.display();\n\t\t\t\tGrid.reload();\n\t\t\t\tdocument.App.Component.Read.wordsMark(document.Helper.Obj.getFieldsAsArray(stat.wordsStudy, 'word'), document.App.WORD_STATE.WORD_STATE_STUDYED);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tdocument.App.Component.WinWordCard.hide();\n\t\t\t\tdocument.App.Component.Read.wordsMark(document.Helper.Obj.getFieldsAsArray(stat.wordsStudy, 'word'), document.App.WORD_STATE.WORD_STATE_STUDY);\n\t\t\t\tif (e instanceof ErrorUser) {\n\t\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\t\ttitle: document.App.localize('Уведомление'),\n\t\t\t\t\t\tmessage: e.message,\n\t\t\t\t\t\ttextButtonClose: document.App.localize('Ок'),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\t\ttitle: '<span style=\"color: red;\">' + document.App.localize('Ошибка.') + '</span>',\n\t\t\t\t\t\tmessage: e,\n\t\t\t\t\t\ttextButtonClose: document.App.localize('Ок'),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tstatic updateIdbWordStudy() {\n\t\treturn Promise.all((() => {\n\t\t\tlet promises = [];\n\t\t\tstat.wordsStudy.forEach((wordStudyStruct, index) => {\n\t\t\t\tlet progressItemLang1ToLang2 = stat.wordsStudyProgress.algLang1ToLang2[index];\n\t\t\t\tlet progressItemLang2ToLang1 = stat.wordsStudyProgress.algLang2ToLang1[index];\n\t\t\t\tlet wordStudyData = {\n\t\t\t\t\tisStudy: document.App.Idb.TRUE,\n\t\t\t\t\tisFinishedLang1ToLang2: document.App.Idb.getBool(progressItemLang1ToLang2.isMemorized\n\t\t\t\t\t\t|| (progressItemLang1ToLang2.cntCorrect - progressItemLang1ToLang2.cntWrong >= stat.defaults.cntCorrectForPass)\n\t\t\t\t\t),\n\t\t\t\t\tisFinishedLang2ToLang1: document.App.Idb.getBool(progressItemLang2ToLang1.isMemorized\n\t\t\t\t\t\t|| (progressItemLang2ToLang1.cntCorrect - progressItemLang2ToLang1.cntWrong >= stat.defaults.cntCorrectForPass)\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tif (wordStudyData.isFinishedLang1ToLang2 && wordStudyData.isFinishedLang2ToLang1) {\n\t\t\t\t\twordStudyData.isStudy = document.App.Idb.FALSE;\n\t\t\t\t}\n\t\t\t\tpromises.push(document.App.Idb.WordsStudy.put(document.App.langStudy, wordStudyStruct.word, wordStudyData))\n\t\t\t});\n\t\t\treturn promises;\n\t\t})());\n\t}\n\n\t/**\n\t * С родного языка на изучаемый\n\t * @return {Promise<any>}\n\t */\n\tstatic doStudyLang1ToLang2() {\n\t\tlet answers = [];\n\t\tlet cnrAttempt = 0;\n\t\tlet currentSet;\n\t\tstat.wordsTranslate.forEach((translateStruct) => {\n\t\t\tanswers.push(translateStruct.word);\n\t\t});\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdoExam.call(this, resolve, reject);\n\t\t});\n\n\t\tfunction doExam(resolve, reject) {\n\t\t\tcurrentSet = getNextSet.call(this);\n\t\t\tif (!document.Helper.isDefined(currentSet)) {\n\t\t\t\tdocument.App.Component.WinWordCard.hide();\n\t\t\t\treturn resolve();\n\t\t\t}\n\t\t\tdocument.App.Component.WinWordCard.update({\n\t\t\t\ttitle: document.App.localize('Изучение слов с родного языка на целевой'),\n\t\t\t\tword: currentSet.word,\n\t\t\t\tanswers: answers,\n\t\t\t\tcorrectAnswer: currentSet.answer\n\t\t\t});\n\t\t\tif (cnrAttempt == 0) {\n\t\t\t\tdocument.App.Component.WinWordCard.show({\n\t\t\t\t\tonMemorized: () => {\n\t\t\t\t\t\tstat.wordsStudyProgress.algLang1ToLang2[currentSet.wordIndex].isMemorized = true;\n\t\t\t\t\t\tdoExam.call(this, resolve, reject);\n\t\t\t\t\t},\n\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\treject(new ErrorUserPressCancel(document.App.localize('Пользователь отменил изучение')))\n\t\t\t\t\t},\n\t\t\t\t\tonAnswerCorrect: () => {\n\t\t\t\t\t\t++stat.wordsStudyProgress.algLang1ToLang2[currentSet.wordIndex].cntCorrect;\n\t\t\t\t\t\tdoExam.call(this, resolve, reject);\n\t\t\t\t\t},\n\t\t\t\t\tonAnswerWrong: () => {\n\t\t\t\t\t\t++stat.wordsStudyProgress.algLang1ToLang2[currentSet.wordIndex].cntWrong;\n\t\t\t\t\t\tdoExam.call(this, resolve, reject);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tcnrAttempt++;\n\t\t}\n\n\t\t/**\n\t\t * Возвращает следующий набор данных для изучения слова.\n\t\t */\n\t\tfunction getNextSet() {\n\t\t\tlet result = {\n\t\t\t\twordIndex: undefined,\n\t\t\t\tword: undefined,\n\t\t\t\tanswer: undefined\n\t\t\t};\n\t\t\tlet unstudiedWords = [];\n\n\t\t\tstat.wordsStudy.forEach((wordStudy, index) => {\n\t\t\t\t/**\n\t\t\t\t * @type {stat.wordsStudyProgress.tplItem} progressItem\n\t\t\t\t * @type {stat.wordsStudyProgress.tplItem} progressItem\n\t\t\t\t */\n\t\t\t\tlet progressItem = stat.wordsStudyProgress.algLang1ToLang2[index];\n\t\t\t\tif (progressItem.isMemorized) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (progressItem.cntCorrect - progressItem.cntWrong < stat.defaults.cntCorrectForPass) {\n\t\t\t\t\tunstudiedWords.push(index);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (unstudiedWords.length < 1) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tlet wordsStudyIndex = Math.floor(Math.random() * unstudiedWords.length);\n\t\t\tresult.wordIndex = unstudiedWords[wordsStudyIndex];\n\t\t\tresult.answer = stat.wordsStudy[result.wordIndex].word;\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type { document.App.Idb.WordsTranslate.Struct}\n\t\t\t */\n\t\t\tlet translateStruct = document.Helper.Obj.getObjectFromArray(stat.wordsTranslate, 'word', result.answer);\n\t\t\tif (translateStruct !== undefined) {\n\t\t\t\tresult.word = translateStruct.translate;\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\ttitle: document.App.localize('Ошибка!'),\n\t\t\t\t\tmessage: document.App.localize('Не удалось извлечь перевод из кеша.'),\n\t\t\t\t});\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * С изучаемого языка на родной\n\t * @return {Promise<any>}\n\t */\n\tstatic doStudyLang2ToLang1() {\n\t\tlet answers = [];\n\t\tlet cnrAttempt = 0;\n\t\tlet currentSet;\n\t\tstat.wordsTranslate.forEach((translateStruct) => {\n\t\t\tanswers.push(translateStruct.translate);\n\t\t});\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdoExam.call(this, resolve, reject);\n\t\t});\n\n\t\tfunction doExam(resolve, reject) {\n\t\t\tcurrentSet = getNextSet.call(this);\n\t\t\tif (!document.Helper.isDefined(currentSet)) {\n\t\t\t\tdocument.App.Component.WinWordCard.hide();\n\t\t\t\treturn resolve();\n\t\t\t}\n\t\t\tdocument.App.Component.WinWordCard.update({\n\t\t\t\ttitle: document.App.localize('Изучение слов с целевого языка на родной'),\n\t\t\t\tword: currentSet.word,\n\t\t\t\tanswers: answers,\n\t\t\t\tcorrectAnswer: currentSet.answer\n\t\t\t});\n\t\t\tif (cnrAttempt == 0) {\n\t\t\t\tdocument.App.Component.WinWordCard.show({\n\t\t\t\t\tonMemorized: () => {\n\t\t\t\t\t\tstat.wordsStudyProgress.algLang2ToLang1[currentSet.wordIndex].isMemorized = true;\n\t\t\t\t\t\tdoExam.call(this, resolve, reject);\n\t\t\t\t\t},\n\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\treject(new ErrorUserPressCancel(document.App.localize('Пользователь отменил изучение')));\n\t\t\t\t\t},\n\t\t\t\t\tonAnswerCorrect: () => {\n\t\t\t\t\t\t++stat.wordsStudyProgress.algLang2ToLang1[currentSet.wordIndex].cntCorrect;\n\t\t\t\t\t\tdoExam.call(this, resolve, reject);\n\t\t\t\t\t},\n\t\t\t\t\tonAnswerWrong: () => {\n\t\t\t\t\t\t++stat.wordsStudyProgress.algLang2ToLang1[currentSet.wordIndex].cntWrong;\n\t\t\t\t\t\tdoExam.call(this, resolve, reject);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tcnrAttempt++;\n\t\t}\n\n\t\t/**\n\t\t * Возвращает следующий набор данных для изучения слова.\n\t\t */\n\t\tfunction getNextSet() {\n\t\t\tlet result = {\n\t\t\t\twordIndex: undefined,\n\t\t\t\tword: undefined,\n\t\t\t\tanswer: undefined\n\t\t\t};\n\t\t\tlet unstudiedWords = [];\n\n\t\t\tstat.wordsStudy.forEach((wordStudy, index) => {\n\t\t\t\t/**\n\t\t\t\t * @type {stat.wordsStudyProgress.tplItem} progressItem\n\t\t\t\t */\n\t\t\t\tlet progressItem = stat.wordsStudyProgress.algLang2ToLang1[index];\n\t\t\t\tif (progressItem.isMemorized) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (progressItem.cntCorrect - progressItem.cntWrong < stat.defaults.cntCorrectForPass) {\n\t\t\t\t\tunstudiedWords.push(index);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (unstudiedWords.length < 1) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tlet wordsStudyIndex = Math.floor(Math.random() * unstudiedWords.length);\n\t\t\tresult.wordIndex = unstudiedWords[wordsStudyIndex];\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type { document.App.Idb.WordsTranslate.Struct}\n\t\t\t */\n\t\t\tlet translateStruct = document.Helper.Obj.getObjectFromArray(stat.wordsTranslate, 'word', stat.wordsStudy[result.wordIndex].word);\n\t\t\tif (!document.Helper.isDefined(translateStruct)) {\n\t\t\t\tdocument.App.Component.WinMsg.show({\n\t\t\t\t\ttitle: document.App.localize('Ошибка!'),\n\t\t\t\t\tmessage: document.App.localize('Не удалось извлечь перевод из кеша.')\n\t\t\t\t});\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tresult.word = translateStruct.word;\n\t\t\tresult.answer = translateStruct.translate;\n\t\t\treturn result;\n\t\t}\n\t}\n};\n","'use strict';\r\nimport './Loadmask.css';\r\n\r\n/**\r\n * Хранилище псевдостатических свойств.\r\n * @type {Object}\r\n */\r\nconst stat = {\r\n\t/**\r\n\t * Время инициации последнено показа Loadmask.\r\n\t * @type {Number}\r\n\t */\r\n\tshowedAt: undefined,\r\n\t/**\r\n\t * Минимальное время показа Loadmask.\r\n\t * Этим параметром избавляемся от моргания при выполнении быстрых операций.\r\n\t * Т.е. запрещаем скрытие маски раньше, чем showedAt + minTimeShow\r\n\t * @type {Number} - миллисекунды\r\n\t */\r\n\tminTimeShow: 500,\r\n\t/**\r\n\t * Хендл таймера задержки скрытия  Loadmask\r\n\t * @type {Number}\r\n\t */\r\n\ttimerHide: undefined\r\n};\r\n\r\n/**\r\n * Компонент \"Маска загрузки\".\r\n * Предназначен для блокирования интерфейса и индикации при длительной фонофой операции (например, AJAX).\r\n */\r\nexport default class Loadmask {\r\n\tstatic getEl() {\r\n\t\treturn document.getElementById('loadmask');\r\n\t}\r\n\r\n\t/**\r\n\t * Показать маску загрузки\r\n\t * @param text\r\n\t */\r\n\tstatic show(text) {\r\n\t\tif (stat.timerHide) {\r\n\t\t\tclearTimeout(stat.timerHide);\r\n\t\t}\r\n\t\tstat.showedAt = Date.now();\r\n\t\tif (text) {\r\n\t\t\tthis.setMessage(text);\r\n\t\t}\r\n\t\tthis.getEl().classList.remove('hidden');\r\n\t}\r\n\r\n\t/**\r\n\t * Скрыть маску загрузки.\r\n\t */\r\n\tstatic hide() {\r\n\t\t/**\r\n\t\t * Количество миллисекунд, прошедшее со времени показа маски\r\n\t\t * @type {number}\r\n\t\t */\r\n\t\tconst timeLeftMs = Date.now() - stat.showedAt;\r\n\t\tif (timeLeftMs >= stat.minTimeShow) {\r\n\t\t\tthis.getEl().classList.add('hidden');\r\n\t\t\tif (stat.timerHide) {\r\n\t\t\t\tclearTimeout(stat.timerHide);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst timeShedule = stat.minTimeShow - timeLeftMs;\r\n\t\t\tstat.timerHide = setTimeout(() => {\r\n\t\t\t\tthis.hide();\r\n\t\t\t}, timeShedule > 0 ? timeShedule : 50);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic setMessage(text) {\r\n\t\tthis.getEl().querySelector('.loadmask-message').innerHTML = text;\r\n\t}\r\n};\r\n","'use strict';\r\n\r\nimport './WinMsg.css';\r\n\r\nconst stat = {\r\n\tdefaultTitle: 'Сообщение',\r\n\tdefaultMessage: '...',\r\n\tdefaultTextButtonClose: 'Ok'\r\n};\r\n\r\n/**\r\n * Компонент общего назначения \"Вывести пользователю текст\"\r\n */\r\nexport default class WinMsg {\r\n\tstatic getEl() {\r\n\t\treturn document.getElementById('win-msg');\r\n\t}\r\n\r\n\tstatic show(options) {\r\n\t\toptions = options || {};\r\n\t\toptions = document.Helper.Obj.replaceMembers({\r\n\t\t\ttitle: document.App.localize(stat.defaultTitle),\r\n\t\t\tmessage: document.App.localize(stat.defaultMessage),\r\n\t\t\ttextButtonClose: document.App.localize(stat.defaultTextButtonClose),\r\n\t\t\tcallback: document.Helper.emptyFn\r\n\t\t}, options);\r\n\t\tthis.getEl().querySelector('.win-msg-title').innerHTML = options.title;\r\n\t\tthis.getEl().querySelector('.win-msg-text').innerHTML = options.message;\r\n\t\tthis.getEl().querySelector('.win-msg-button-close').innerHTML = options.textButtonClose;\r\n\t\tthis.getEl().classList.remove('hidden');\r\n\t\tdocument.querySelector('#modal-background').classList.remove('hidden');\r\n\t\tthis.getEl().querySelector('.win-msg-button-close').onclick = () => {\r\n\t\t\tthis.getEl().classList.add('hidden');\r\n\t\t\tdocument.querySelector('#modal-background').classList.add('hidden');\r\n\t\t\toptions.callback();\r\n\t\t};\r\n\t}\r\n};","'use strict';\r\n\r\nimport './WinWordCard.css';\r\n\r\nconst stat =  {\r\n\tcorrectAnswer: undefined,\r\n\telTplAnswer : undefined,\r\n\tdefaults: {\r\n\t\ttitle: 'Изучение слова'\r\n\t}\r\n};\r\n\r\n/**\r\n * Компонент \"Окно, карточка изучения слова\"\r\n */\r\n export default class WinWordCard {\r\n\tstatic getEl() {\r\n\t\treturn document.getElementById('win-word-card');\r\n\t}\r\n\t/**\r\n\t *\r\n\t * @param options\r\n\t * @param options.onCancel\r\n\t * @param options.onMemorized\r\n\t * @param options.onAnswerCorrect\r\n\t * @param options.onAnswerWrong\r\n\t * @return { document.App.Component.WinWordCard}\r\n\t */\r\n\tstatic show(options) {\r\n\t\tif (!document.Helper.isObject(options)) {\r\n\t\t\tthis.throwError('show/Параметры не переданы');\r\n\t\t} else if (!document.Helper.isFunction(options.onCancel)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"onCancel\"');\r\n\t\t} else if (!document.Helper.isFunction(options.onMemorized)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"onMemorized\"');\r\n\t\t} else if (!document.Helper.isFunction(options.onAnswerCorrect)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"onAnswerCorrect\"');\r\n\t\t} else if (!document.Helper.isFunction(options.onAnswerWrong)) {\r\n\t\t\tthis.throwError('show/Не передан параметр \"onAnswerWrong\"');\r\n\t\t}\r\n\t\tthis.getEl().querySelector('.win-word-card-window').onclick = (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tif (event.target.classList.contains('win-word-card-btn-cancel')) {\r\n\t\t\t\toptions.onCancel();\r\n\t\t\t} else if (event.target.classList.contains('win-word-card-btn-memorized')) {\r\n\t\t\t\toptions.onMemorized();\r\n\t\t\t} else if (event.target.classList.contains('win-word-card-answer')) {\r\n\t\t\t\tif (event.target.innerHTML === stat.correctAnswer) {\r\n\t\t\t\t\tevent.target.classList.add('correct');\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tevent.target.classList.remove('correct');\r\n\t\t\t\t\t\toptions.onAnswerCorrect();\r\n\t\t\t\t\t}, 700);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.target.classList.add('wrong');\r\n\t\t\t\t\tlet word = event.target.innerHTML;\r\n\t\t\t\t\tevent.target.innerHTML = stat.correctAnswer;\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tevent.target.classList.remove('wrong');\r\n\t\t\t\t\t\tevent.target.innerHTML = word;\r\n\t\t\t\t\t\toptions.onAnswerWrong();\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.getEl().classList.remove('hidden');\r\n\t\tdocument.querySelector('#modal-background').classList.remove('hidden');\r\n\t\treturn this;\r\n\t}\r\n\tstatic hide() {\r\n\t\tthis.getEl().classList.add('hidden');\r\n\t\tdocument.querySelector('#modal-background').classList.add('hidden');\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t *\r\n\t * @param options\r\n\t * @param options.title\r\n\t * @param options.word\r\n\t * @param options.answers\r\n\t * @param options.correctAnswer\r\n\t * @return { document.App.Component.WinWordCard}\r\n\t */\r\n\tstatic update(options) {\r\n\t\tif (!document.Helper.isObject(options)) {\r\n\t\t\tthis.throwError('update/Не переданы параметы');\r\n\t\t} else if (!document.Helper.isString(options.word)) {\r\n\t\t\tthis.throwError('update/Не передан параметр \"word\"');\r\n\t\t} else if (!document.Helper.isArray(options.answers)) {\r\n\t\t\tthis.throwError('update/Не передан параметр \"answers\"');\r\n\t\t} else if (!document.Helper.isString(options.correctAnswer)) {\r\n\t\t\tthis.throwError('update/Не передан параметр \"correctAnswer\"');\r\n\t\t}\r\n\t\tstat.correctAnswer = options.correctAnswer;\r\n\t\tlet elAnsvers = this.getEl().querySelector('.win-word-card-answers');\r\n\t\tif (!stat.elTplAnswer){\r\n\t\t\tstat.elTplAnswer = this.getEl().querySelector('.tpl.win-word-card-answer').cloneNode(true);\r\n\t\t\tthis.getEl().querySelector('.tpl.win-word-card-answer').remove();\r\n\t\t\tstat.elTplAnswer.classList.remove('tpl');\r\n\t\t}\r\n\t\tthis.getEl().querySelector('.win-word-card-title').innerHTML = options.title || document.App.localize(stat.defaults.title);\r\n\t\tthis.getEl().querySelector('.win-word-card-word').innerHTML = options.word;\r\n\t\telAnsvers.innerHTML = '';\r\n\t\toptions.answers.forEach((answer) => {\r\n\t\t\tlet newElAnswer = stat.elTplAnswer.cloneNode(true);\r\n\t\t\tnewElAnswer.innerHTML = answer;\r\n\t\t\telAnsvers.appendChild(newElAnswer);\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n};","'use strict';\nimport './Component.css';\n\nimport App from \"../App\";\nimport Nav from './Component/Nav';\nimport Setlang from './Component/Setlang';\nimport Statistic from './Component/Statistic';\nimport Library from './Component/Library';\nimport Read from './Component/Read';\nimport Study from './Component/Study';\nimport Loadmask from './Component/Loadmask';\nimport WinMsg from './Component/WinMsg';\nimport WinWordActions from './Component/WinWordActions';\nimport WinWordCard from \"./Component/WinWordCard\";\n\n\n/**\n * Контейнер для компонент приложения\n */\nexport default class Component {\n\tstatic get App() {\n\t\treturn App;\n\t}\n\n\tstatic get Nav() {\n\t\treturn Nav;\n\t}\n\n\tstatic get Setlang() {\n\t\treturn Setlang;\n\t}\n\n\tstatic get Statistic() {\n\t\treturn Statistic;\n\t}\n\n\tstatic get Library() {\n\t\treturn Library;\n\t}\n\n\tstatic get Read() {\n\t\treturn Read;\n\t}\n\n\tstatic get Study() {\n\t\treturn Study;\n\t}\n\n\tstatic get Loadmask() {\n\t\treturn Loadmask;\n\t}\n\n\tstatic get WinMsg() {\n\t\treturn WinMsg;\n\t}\n\n\tstatic get WinWordActions() {\n\t\treturn WinWordActions;\n\t}\n\n\tstatic get WinWordCard() {\n\t\treturn WinWordCard;\n\t}\n\n\tstatic init() {\n\t\tNav.init();\n\t\tSetlang.init();\n\t\tLibrary.init();\n\t\tRead.init();\n\t\tStudy.init();\n\t}\n};","'use strict';\n\nimport App from './Errors/App'\nimport User from './Errors/User'\n\nexport default class Errors {\n\tstatic get App() {\n\t\treturn App;\n\t}\n\n\tstatic get User() {\n\t\treturn User;\n\t}\n};","'use strict';\nimport Helper from '../Helper';\n\n/**\n * Статические свойства класса, не поддерживаемые ES6.\n * @type {Object}\n */\nconst stat = {\n\t_loadedLang: {},\n\t_translates: {},\n\t_unknownTranslates: {}\n};\n\nexport default class Localize {\n\t/**\n\t * Загружает перевод с сервера, если требуется\n\t * @param lang\n\t * @return {boolean}\n\t */\n\tstatic load(lang) {\n\t\ttry {\n\t\t\tif (!Helper.isDefined(lang)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (lang in stat._loadedLang && !stat._loadedLang[lang]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (lang in stat._translates) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlet xhr = Helper.Ajax.getXhr();\n\t\t\t// Синхронный запрос т.к. перевод может потребоваться при объявлении объекта.\n\t\t\txhr.open('GET', '/data/localize/' + lang + '.json', false);\n\t\t\txhr.send();\n\t\t\tif (xhr.status != 200) {\n\t\t\t\tstat._loadedLang[lang] = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet json = JSON.parse(xhr.responseText);\n\t\t\tstat._translates[lang] = json;\n\t\t\tstat._loadedLang[lang] = true;\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\tstat._loadedLang[lang] = false;\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Возвращает перевод для ключевой фразы\n\t * @param {String} text - ключевая фраза(первичный текст для перевода)\n\t * @param {String} lang - Язык, для которого запрошен перевод (т.е. на выходе должна быть фраза для этого языка).\n\t * @return {*}\n\t */\n\tstatic get(text, lang) {\n\t\tif (!this.load(lang)) {\n\t\t\tthis.addUnknownTranslate(text, lang);\n\t\t\treturn text;\n\t\t}\n\t\tif (text in stat._translates[lang]) {\n\t\t\tlet translate = stat._translates[lang][text];\n\t\t\tif (Helper.isNull(translate)) {\n\t\t\t\treturn text;\n\t\t\t} else {\n\t\t\t\treturn translate;\n\t\t\t}\n\t\t}\n\t\tthis.addUnknownTranslate(text, lang);\n\t\treturn text;\n\t}\n\n\t/**\n\t * Добавляет ключевую фразу в список не переведенных.\n\t * @TODO: реализовать выгрузку на сервер и сигнал администратору сайта.\n\t * @param text\n\t * @param lang\n\t */\n\tstatic addUnknownTranslate(text, lang) {\n\t\tif (!(lang in stat._unknownTranslates)) {\n\t\t\tstat._unknownTranslates[lang] = {};\n\t\t}\n\t\tstat._unknownTranslates[lang][text] = \"\";\n\t\tconsole.log('translateMe/' + lang + '/', text);\n\t}\n};\n","'use strict';\r\n\r\nimport './App.css';\r\n\r\nimport Helper from './Helper';\r\nimport Component from './App/Component';\r\nimport Errors from './App/Errors';\r\nimport Idb from './App/Idb';\r\nimport Localize from './App/Localize';\r\nimport ErrorUser from './App/Errors/User';\r\n\r\nconst stat = {\r\n\tWORD_STATE: {\r\n\t\tWORD_STATE_STUDY: 'WORD_STATE_STUDY',\r\n\t\tWORD_STATE_STUDYED: 'WORD_STATE_STUDYES',\r\n\t\tWORD_STATE_UNKNOWN: 'WORD_STATE_UNKNOWN'\r\n\t},\r\n\t/**\r\n\t * Перечень тегов, для которых разрешено выделение мышью\r\n\t */\r\n\tselectibleTags: ['SELECT', 'INPUT'],\r\n\r\n\t/**\r\n\t * @see: {data/app-env.json}\r\n\t */\r\n\tappEnv: undefined,\r\n\r\n\tlangGui: undefined,\r\n\tlangStudy: undefined,\r\n\r\n\t/**\r\n\t * private {Object} book\r\n\t */\r\n\tbook: {}\r\n};\r\n\r\n\r\nexport default class App {\r\n\t/**-----------------------------------------------------------------------\r\n\t * Внешние библиотеки\r\n\t */\r\n\r\n\tstatic get Helper() {\r\n\t\treturn Helper;\r\n\t}\r\n\r\n\tstatic get Component() {\r\n\t\treturn Component;\r\n\t}\r\n\r\n\tstatic get Errors() {\r\n\t\treturn Errors;\r\n\t}\r\n\r\n\tstatic get Idb() {\r\n\t\treturn Idb;\r\n\t}\r\n\r\n\tstatic get Localize() {\r\n\t\treturn Localize;\r\n\t}\r\n\r\n\t/**-----------------------------------------------------------------------\r\n\t * Внутренняя реализация\r\n\t */\r\n\tstatic get WORD_STATE() {\r\n\t\treturn stat.WORD_STATE\r\n\t}\r\n\r\n\tstatic get appEnv() {\r\n\t\treturn stat.appEnv;\r\n\t}\r\n\r\n\t//\r\n\t// static set appEnv(newValue) {\r\n\t// \tstat.appEnv = newValue;\r\n\t// }\r\n\r\n\tstatic run() {\r\n\t\t// Отключаем выделение мышью (чтобы не выделялся текст меню при двойном клике).\r\n\t\tdocument.body.onmousedown = (event) => {\r\n\t\t\tif (stat.selectibleTags.indexOf(event.target.tagName) >= 0) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t};\r\n\t\tdocument.body.onselectstart = () => {\r\n\t\t\tif (stat.selectibleTags.indexOf(event.target.tagName) >= 0) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t};\r\n\t\tComponent.init();\r\n\r\n\t\t// Пока локализация не установлена.\r\n\t\tApp.Component.Loadmask.show('...');\r\n\t\t(new Promise((resolve, reject) => {\r\n\t\t\t// Старт. Читаем с сервера конфиг окружения.\r\n\t\t\tApp.loadEnv().then(() => {\r\n\t\t\t\tresolve();\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\treject(e);\r\n\t\t\t\treturn;\r\n\t\t\t});\r\n\t\t})).then(() => {\r\n\t\t\t// Раздел чтения последней сессии пользователя из БД\r\n\t\t\tlet data = {\r\n\t\t\t\tlastSession: undefined,\r\n\t\t\t\tlastBook: undefined,\r\n\t\t\t\tisBookReaded: false\r\n\t\t\t};\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tApp.Idb.KeyVal.LastSession.get().then((lastSession) => {\r\n\t\t\t\t\tdata.lastSession = lastSession;\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}).then((data) => {\r\n\t\t\t// Раздел локализации приложения\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tif (Helper.isObject(data.lastSession)) {\r\n\t\t\t\t\tApp.langGui = data.lastSession.langGui;\r\n\t\t\t\t\tApp.langStudy = data.lastSession.langStudy;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tApp.langGui = stat.appEnv.defaults.langGui;\r\n\t\t\t\t\tApp.langStudy = stat.appEnv.defaults.langStudy;\r\n\t\t\t\t}\r\n\t\t\t\tApp.localizeGui();\r\n\t\t\t\tresolve(data);\r\n\t\t\t});\r\n\t\t}).then((data) => {\r\n\t\t\t// Раздел чтения книги из последней сессии пользователя\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tApp.Component.Loadmask.show(App.localize('Загрузка...'));\r\n\t\t\t\tApp.Component.Statistic.display().then(() => {\r\n\t\t\t\t\tif (Helper.isObject(data.lastSession) && Helper.isString(data.lastSession.bookHash)) {\r\n\t\t\t\t\t\tApp.Idb.Books.getByHash(data.lastSession.bookHash).then((lastBook) => {\r\n\t\t\t\t\t\t\tdata.lastBook = lastBook;\r\n\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\tHelper.Log.addDebug('Не удалось обновить статистику изучения слов');\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}).then((data) => {\r\n\t\t\t// Раздел вывода книги в область чтения\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tif (data.lastBook && data.lastBook.content) {\r\n\t\t\t\t\tApp.bookToRead(data.lastBook.content, false).then(() => {\r\n\t\t\t\t\t\tdata.isBookReaded = true;\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}).then((data) => {\r\n\t\t\t// Раздел принятия решения о навигации в зависимости от результата инициализации.\r\n\t\t\tApp.Component.Loadmask.hide();\r\n\t\t\tif (data.isBookReaded) {\r\n\t\t\t\tApp.Component.Nav.go2section('read');\r\n\t\t\t\t//App.Component.Nav.go2section('study');\r\n\t\t\t} else if (data.lastSession) {\r\n\t\t\t\tApp.Component.Nav.go2section('library');\r\n\t\t\t} else {\r\n\t\t\t\tApp.Component.Nav.go2section('setlang');\r\n\t\t\t}\r\n\t\t}).catch((e) => {\r\n\t\t\tHelper.Log.addDebug(e);\r\n\t\t\tif (e instanceof ErrorUser) {\r\n\t\t\t\tApp.Component.WinMsg.show({\r\n\t\t\t\t\ttitle: App.localize('Уведомление.'),\r\n\t\t\t\t\tmessage: e.message,\r\n\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\tApp.Component.Nav.go2section('setlang');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tApp.Component.Nav.go2section('setlang');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Загружает переменные окружения для приложения (справочник языков, языки по умолчанию и т.д.).\r\n\t * @return {Promise<any>}\r\n\t */\r\n\tstatic loadEnv() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t/**\r\n\t\t\t *\r\n\t\t\t * @type {XMLHttpRequest}\r\n\t\t\t */\r\n\t\t\tlet xhr = Helper.Ajax.getXhr();\r\n\t\t\txhr.open('GET', '/data/app-env.json');\r\n\t\t\txhr.send();\r\n\t\t\txhr.addEventListener('readystatechange', () => {\r\n\t\t\t\tif (xhr.readyState !== 4) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet json = JSON.parse(xhr.responseText);\r\n\t\t\t\tstat.appEnv = json;\r\n\t\t\t\tresolve();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Находит по хешу книгу в библиотеке и переправляет ее в секцию чтения.\r\n\t * @param hash\r\n\t * @return {Promise<any>}\r\n\t */\r\n\tstatic bookToReadByHash(hash) {\r\n\t\tApp.Component.Loadmask.show(App.localize('Извлечение книги...'));\r\n\t\tlet book;\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tApp.Idb.Books.getByHash(hash).then((resBook) => {\r\n\t\t\t\tbook = resBook;\r\n\t\t\t\treturn App.bookToRead(resBook.content, false);\r\n\t\t\t}).then(() => {\r\n\t\t\t\treturn App.Idb.KeyVal.LastSession.put({\r\n\t\t\t\t\tlangGui: App.langGui,\r\n\t\t\t\t\tlangStudy: App.langStudy,\r\n\t\t\t\t\tbookHash: book.hash,\r\n\t\t\t\t\tbookPosition: 0\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tApp.Component.Loadmask.hide();\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t});\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\treject(e);\r\n\t\t\t\treturn;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Загрузить текст книги в область чтения.\r\n\t * @param text\r\n\t * @param isAdd\r\n\t * @return {Promise<any>}\r\n\t */\r\n\tstatic bookToRead(text, isAdd) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tisAdd = Helper.isDefined(isAdd) ? isAdd : true;\r\n\t\t\tApp.Component.Loadmask.show(App.localize('Конвертация книги...'));\r\n\t\t\tlet book;\r\n\t\t\ttry {\r\n\t\t\t\tbook = Helper.Fb2.getBookFromText(text);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tHelper.Log.addDebug(e);\r\n\t\t\t\treject(new App.Errors.User(App.localize('Не удалось преобразовать книгу')));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (App.langStudy !== stat.appEnv.fb2.languages[book.lang]) {\r\n\t\t\t\tApp.Component.Loadmask.hide();\r\n\t\t\t\treject(new ErrorUser(App.localize('Язык книги не соответствует изучаемому.')));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tApp.Component.Loadmask.show(App.localize('Формирование области чтения...'));\r\n\t\t\tApp.Component.Read.displayBook(book).then(() => {\r\n\t\t\t\tApp.Component.Loadmask.hide();\r\n\t\t\t\tif (!isAdd) {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tApp.Idb.Books.add(\r\n\t\t\t\t\t\tApp.langStudy,\r\n\t\t\t\t\t\tbook.title.join('/'),\r\n\t\t\t\t\t\tbook.image,\r\n\t\t\t\t\t\ttext\r\n\t\t\t\t\t).then((result) => {\r\n\t\t\t\t\t\tApp.Idb.KeyVal.LastSession.put({\r\n\t\t\t\t\t\t\tbookHash: result.hash,\r\n\t\t\t\t\t\t\tbookPosition: 0\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\t\tApp.Component.Loadmask.hide();\r\n\t\t\t\t\t\tHelper.Log.addDebug(e);\r\n\t\t\t\t\t\tApp.Component.WinMsg.show({\r\n\t\t\t\t\t\t\ttitle: '<span style=\"color: red\">' + App.localize('Ошибка!') + '</span>',\r\n\t\t\t\t\t\t\tmessage: App.localize('Не удалось добавить книгу в библиотеку.')\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}).catch((e) => {\r\n\t\t\t\tApp.Component.Loadmask.hide();\r\n\t\t\t\treject(e);\r\n\t\t\t\treturn;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Фозвращает Promise перевода одного слова.\r\n\t * @param word {String}\r\n\t * @param isReturnStruct {Boolean}\r\n\t * @return {Promise<any>}\r\n\t */\r\n\tstatic getWordTranslate(word, isReturnStruct = false) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tApp.Idb.WordsTranslate.get(\r\n\t\t\t\tApp.langStudy,\r\n\t\t\t\tApp.langGui,\r\n\t\t\t\tword\r\n\t\t\t).then((translateStruct) => {\r\n\t\t\t\tif (Helper.isObject(translateStruct)) {\r\n\t\t\t\t\tif (isReturnStruct) {\r\n\t\t\t\t\t\tresolve(translateStruct);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolve(translateStruct.translate);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tHelper.Google.translate(\r\n\t\t\t\t\t\tstat.appEnv.google.languages[App.langGui],\r\n\t\t\t\t\t\tword\r\n\t\t\t\t\t).then((result) => {\r\n\t\t\t\t\t\tif (!Helper.isObject(result)) {\r\n\t\t\t\t\t\t\treject();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet struct = Helper.Google.getTranslateConverted(result);\r\n\t\t\t\t\t\tif (Helper.isEmpty(struct.translate)) {\r\n\t\t\t\t\t\t\treject(new Error('Не удалось получить перевод от Google'));\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!isReturnStruct) {\r\n\t\t\t\t\t\t\t\tresolve(struct.translate);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tApp.Idb.WordsTranslate.put(\r\n\t\t\t\t\t\t\t\tApp.langStudy,\r\n\t\t\t\t\t\t\t\tApp.langGui,\r\n\t\t\t\t\t\t\t\tword,\r\n\t\t\t\t\t\t\t\tstruct.translate,\r\n\t\t\t\t\t\t\t\tstruct.score\r\n\t\t\t\t\t\t\t).then(() => {\r\n\t\t\t\t\t\t\t\treturn App.Idb.WordsTranslate.get(App.langStudy, App.langGui, word);\r\n\t\t\t\t\t\t\t}).then((translateStruct) => {\r\n\t\t\t\t\t\t\t\tif (isReturnStruct) {\r\n\t\t\t\t\t\t\t\t\tif (Helper.isObject(translateStruct)) {\r\n\t\t\t\t\t\t\t\t\t\tresolve(translateStruct);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treject(new Error('Неудалось извлечь слово из БД после сохранения'));\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Возвращает Promise перевода массива слов.\r\n\t * @param {Array} words\r\n\t */\r\n\tstatic getWordsTranslate(words) {\r\n\t\tlet result = [];\r\n\t\treturn Promise.all((() => {\r\n\t\t\tlet promices = [];\r\n\t\t\twords.forEach((word) => {\r\n\t\t\t\tpromices.push(App.getWordTranslate(word, true))\r\n\t\t\t});\r\n\t\t\treturn promices;\r\n\t\t})()).then((results) => {\r\n\t\t\tif (!Helper.isArray(results)) {\r\n\t\t\t\treturn new Error('Не удалось получить перевод для списка слов');\r\n\t\t\t}\r\n\t\t\treturn results;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic wordStudyAdd(word) {\r\n\t\tApp.Idb.WordsStudy.put(App.langStudy, word, {\r\n\t\t\tisStudy: App.Idb.TRUE\r\n\t\t}).then((rowId) => {\r\n\t\t\tApp.Component.Statistic.display();\r\n\t\t}).catch((e) => {\r\n\t\t\tHelper.Log.addDebug(e);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic WordStudyedAdd(word) {\r\n\t\tApp.Idb.WordsStudy.put(App.langStudy, word, {\r\n\t\t\tisStudy: App.Idb.FALSE\r\n\t\t}).then((isSuccess) => {\r\n\t\t\tApp.Component.Statistic.display();\r\n\t\t}).catch((e) => {\r\n\t\t\tHelper.Log.addDebug(e);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic getWordHash(word) {\r\n\t\tlet result = Helper.Hash.hashCode(word.toLowerCase());\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param text\r\n\t * @return {*}\r\n\t */\r\n\tstatic localize(text) {\r\n\t\treturn App.Localize.get(text, App.langGui)\r\n\t}\r\n\r\n\tstatic localizeGui() {\r\n\t\tlet elList = document.querySelectorAll('.need-translate');\r\n\t\telList = [].slice.call(elList)\r\n\t\telList.forEach((elTranslate) => {\r\n\t\t\tlet key = elTranslate.getAttribute('data-localize-key');\r\n\t\t\tkey = key || elTranslate.innerHTML;\r\n\t\t\tlet translate = App.Localize.get(key, App.langGui)\r\n\t\t\telTranslate.innerHTML = translate;\r\n\t\t\telTranslate.setAttribute('data-localize-key', key);\r\n\t\t})\r\n\t}\r\n};\r\n","\r\nimport './css/reset.css';\r\n\r\n// Импорт корневых модулей\r\nimport Helper from './app/Helper';\r\nimport App from './app/App';\r\n\r\n/**\r\n * Финт ушами - ранее суперглобальные переменные в webpack становятся локальными.\r\n * Хардкорно публикуем в document.\r\n * @TODO: Переделать использование суперглобальных переменных на импорт модулей.\r\n * @type {Helper}\r\n */\r\ndocument.Helper = Helper;\r\ndocument.App = App;\r\n\r\n// Запуск приложения\r\nApp.run();\r\n\r\n"],"sourceRoot":""}